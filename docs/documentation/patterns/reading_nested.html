<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Reading Nested Data | Malloy Documentation</title>
    <link rel="stylesheet" href="/css/document.css" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="/img/favicon.ico"
    />
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-0M10W7C20Y"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
    
      gtag("config", "G-0M10W7C20Y");
    </script>
    <style>
      malloy-render::part(table-container) {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div class="top">
      <div class="header">
        <div class="header-banner">
          <a href="http://www.malloydata.dev" target="_blank">
            <img
              class="logo"
              src="/img/logo.png"
              alt="malloy logo"
            />
          </a>

          Malloy
          <span class="subtitle">Documentation</span>
        </div>
        <div class="header-right">
          <div class="header-links">
            <a href="https://github.com/malloydata/malloy" target="_blank"
              ><img
                src="/img/github.svg"
                style="transform: scale(0.5)"
            /></a>
            <a href="/slack" target="_blank"
              ><img src="/img/slack.svg"
            /></a>
          </div>
          <form onSubmit="() => alert('submit')" action="/search">
            <div class="search-input-outer">
              <img src="/img/search.svg" alt="search" />
              <input placeholder="Search" id="search-input" name="query" />
            </div>
            <input type="submit" style="display: none" />
          </form>
        </div>
      </div>
      <div class="main">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-section">
              <div id=about_malloy
                class="sidebar-section-title {% unless /documentation/index.html,/documentation/about/features.html,/documentation/about/tao.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                About Malloy
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation">
                <img src="/img/article_icon.svg" alt="document"/>
                What Is Malloy
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/about/features">
                <img src="/img/article_icon.svg" alt="document"/>
                Key Features
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/about/tao">
                <img src="/img/article_icon.svg" alt="document"/>
                The Tao of Malloy
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=setting_up malloy
                class="sidebar-section-title {% unless /documentation/setup/extension.html,/documentation/setup/connection_instructions.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Setting up Malloy
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/setup/extension">
                <img src="/img/article_icon.svg" alt="document"/>
                Installing the Malloy Extension
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/setup/connection_instructions">
                <img src="/img/article_icon.svg" alt="document"/>
                Connecting a Database
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=user_guides
                class="sidebar-section-title {% unless /documentation/user_guides/querying_a_model.html,/documentation/user_guides/malloy_by_example.html,/documentation/user_guides/sql_experts1.html,/documentation/user_guides/sql_experts2.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                User Guides
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/user_guides/querying_a_model">
                <img src="/img/article_icon.svg" alt="document"/>
                Querying a Semantic Model
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/user_guides/malloy_by_example">
                <img src="/img/article_icon.svg" alt="document"/>
                Building Semantic Models
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/user_guides/sql_experts1">
                <img src="/img/article_icon.svg" alt="document"/>
                Malloy for SQL Folks
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/user_guides/sql_experts2">
                <img src="/img/article_icon.svg" alt="document"/>
                More Guidance for SQL Users
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=language_reference
                class="sidebar-section-title {% unless /documentation/language/statement.html,/documentation/language/source.html,/documentation/language/query.html,/documentation/language/views.html,/documentation/language/datatypes.html,/documentation/language/fields.html,/documentation/language/aggregates.html,/documentation/language/expressions.html,/documentation/language/functions.html,/documentation/language/filters.html,/documentation/language/calculations_windows.html,/documentation/language/order_by.html,/documentation/language/join.html,/documentation/language/nesting.html,/documentation/language/sql_sources.html,/documentation/language/imports.html,/documentation/language/connections.html,/documentation/language/tags.html,/documentation/language/quick_reference.html,/documentation/language/changelog.html,/documentation/language/dialect/bigquery.html,/documentation/language/dialect/presto-trino.html,/documentation/language/dialect/snowflake.html,/documentation/language/dialect/mysql.html,/documentation/language/dialect/duckdb.html,/documentation/language/dialect/postgres.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Language Reference
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/language/statement">
                <img src="/img/article_icon.svg" alt="document"/>
                Models
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/source">
                <img src="/img/article_icon.svg" alt="document"/>
                Sources
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/query">
                <img src="/img/article_icon.svg" alt="document"/>
                Queries
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/views">
                <img src="/img/article_icon.svg" alt="document"/>
                Views
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/datatypes">
                <img src="/img/article_icon.svg" alt="document"/>
                Data Types
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/fields">
                <img src="/img/article_icon.svg" alt="document"/>
                Fields
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/aggregates">
                <img src="/img/article_icon.svg" alt="document"/>
                Aggregates
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/expressions">
                <img src="/img/article_icon.svg" alt="document"/>
                Expressions
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/functions">
                <img src="/img/article_icon.svg" alt="document"/>
                Functions
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/filters">
                <img src="/img/article_icon.svg" alt="document"/>
                Filters
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/calculations_windows">
                <img src="/img/article_icon.svg" alt="document"/>
                Calculations (window functions)
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/order_by">
                <img src="/img/article_icon.svg" alt="document"/>
                Ordering and Limiting
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/join">
                <img src="/img/article_icon.svg" alt="document"/>
                Joins
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/nesting">
                <img src="/img/article_icon.svg" alt="document"/>
                Nested Views
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/sql_sources">
                <img src="/img/article_icon.svg" alt="document"/>
                SQL Sources
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/imports">
                <img src="/img/article_icon.svg" alt="document"/>
                Imports
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/connections">
                <img src="/img/article_icon.svg" alt="document"/>
                Connections
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/tags">
                <img src="/img/article_icon.svg" alt="document"/>
                Tags
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/quick_reference.html">
                <img src="/img/article_icon.svg" alt="document"/>
                Quick Reference
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/changelog">
                <img src="/img/article_icon.svg" alt="document"/>
                Change Log
              </a>
            </div>
        <div class="sidebar-section">
              <div id=dialects
                class="sidebar-section-title {% unless /documentation/language/dialect/bigquery.html,/documentation/language/dialect/presto-trino.html,/documentation/language/dialect/snowflake.html,/documentation/language/dialect/mysql.html,/documentation/language/dialect/duckdb.html,/documentation/language/dialect/postgres.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Dialects
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/language/dialect/bigquery">
                <img src="/img/article_icon.svg" alt="document"/>
                BigQuery
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/dialect/presto-trino">
                <img src="/img/article_icon.svg" alt="document"/>
                Presto / Trino
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/dialect/snowflake">
                <img src="/img/article_icon.svg" alt="document"/>
                Snowflake
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/dialect/mysql">
                <img src="/img/article_icon.svg" alt="document"/>
                MySQL
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/dialect/duckdb">
                <img src="/img/article_icon.svg" alt="document"/>
                DuckDB
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/language/dialect/postgres">
                <img src="/img/article_icon.svg" alt="document"/>
                PostgreSQL
              </a>
            </div>
              </div>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=common_patterns
                class="sidebar-section-title {% unless /documentation/patterns/yoy.html,/documentation/patterns/foreign_sums.html,/documentation/patterns/reading_nested.html,/documentation/patterns/percent_of_total.html,/documentation/patterns/cohorts.html,/documentation/patterns/nested_subtotals.html,/documentation/patterns/other.html,/documentation/patterns/autobin.html,/documentation/patterns/moving_avg.html,/documentation/patterns/transform.html,/documentation/patterns/sessionize.html,/documentation/patterns/dim_index.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Common Patterns
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/patterns/yoy">
                <img src="/img/article_icon.svg" alt="document"/>
                Comparing Timeframes
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/foreign_sums">
                <img src="/img/article_icon.svg" alt="document"/>
                Foreign Sums and Averages
              </a>
            </div>
        <div class='sidebar-item active'>
              <a href="/documentation/patterns/reading_nested">
                <img src="/img/article_icon.svg" alt="document"/>
                Reading Nested Data
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/percent_of_total">
                <img src="/img/article_icon.svg" alt="document"/>
                Percent of Total
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/cohorts">
                <img src="/img/article_icon.svg" alt="document"/>
                Cohort Analysis
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/nested_subtotals">
                <img src="/img/article_icon.svg" alt="document"/>
                Nested Subtotals
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/other">
                <img src="/img/article_icon.svg" alt="document"/>
                Bucketing with 'Other'
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/autobin">
                <img src="/img/article_icon.svg" alt="document"/>
                Auto-binning Histograms
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/moving_avg">
                <img src="/img/article_icon.svg" alt="document"/>
                Moving Average
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/transform">
                <img src="/img/article_icon.svg" alt="document"/>
                Transform Data
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/sessionize">
                <img src="/img/article_icon.svg" alt="document"/>
                Sessionize - Map/Reduce
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/patterns/dim_index">
                <img src="/img/article_icon.svg" alt="document"/>
                Dimensional Indexes
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=rendering_results
                class="sidebar-section-title {% unless /documentation/visualizations/about_rendering.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Rendering Results
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/visualizations/about_rendering">
                <img src="/img/article_icon.svg" alt="document"/>
                Overview
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=rendering_legacy docs
                class="sidebar-section-title {% unless /documentation/visualizations/overview.html,/documentation/visualizations/numbers.html,/documentation/visualizations/links.html,/documentation/visualizations/pivots.html,/documentation/visualizations/transpose.html,/documentation/visualizations/dashboards.html,/documentation/visualizations/lists.html,/documentation/visualizations/bar_charts.html,/documentation/visualizations/charts_line_chart.html,/documentation/visualizations/scatter_charts.html,/documentation/visualizations/shape_maps.html,/documentation/visualizations/segment_maps.html,/documentation/visualizations/legacy_renderer.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Rendering Legacy Docs
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/visualizations/overview">
                <img src="/img/article_icon.svg" alt="document"/>
                Overview
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/numbers">
                <img src="/img/article_icon.svg" alt="document"/>
                Numbers
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/links">
                <img src="/img/article_icon.svg" alt="document"/>
                Links
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/pivots">
                <img src="/img/article_icon.svg" alt="document"/>
                Pivoted Tables
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/transpose">
                <img src="/img/article_icon.svg" alt="document"/>
                Table Transpose
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/dashboards">
                <img src="/img/article_icon.svg" alt="document"/>
                Dashboards
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/lists">
                <img src="/img/article_icon.svg" alt="document"/>
                Lists
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/bar_charts">
                <img src="/img/article_icon.svg" alt="document"/>
                Bar Charts
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/charts_line_chart">
                <img src="/img/article_icon.svg" alt="document"/>
                Line Charts
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/scatter_charts">
                <img src="/img/article_icon.svg" alt="document"/>
                Scatter Charts
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/shape_maps">
                <img src="/img/article_icon.svg" alt="document"/>
                Shape Maps
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/segment_maps">
                <img src="/img/article_icon.svg" alt="document"/>
                Segment Maps
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/visualizations/legacy_renderer">
                <img src="/img/article_icon.svg" alt="document"/>
                Legacy Renderer
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=malloysql
                class="sidebar-section-title {% unless /documentation/malloy_sql/index.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                MalloySQL
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/malloy_sql/index">
                <img src="/img/article_icon.svg" alt="document"/>
                Using MalloySQL
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=malloy_cli
                class="sidebar-section-title {% unless /documentation/malloy_cli/index.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Malloy CLI
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/malloy_cli/index">
                <img src="/img/article_icon.svg" alt="document"/>
                The Malloy CLI
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=malloy_with python
                class="sidebar-section-title {% unless /documentation/malloy_python/python_package.html,/documentation/malloy_python/jupyter.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Malloy with Python
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/malloy_python/python_package">
                <img src="/img/article_icon.svg" alt="document"/>
                Malloy Python Package
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/malloy_python/jupyter">
                <img src="/img/article_icon.svg" alt="document"/>
                Malloy in Jupyter Notebooks
              </a>
            </div>
              </div>
            </div>
        <div class="sidebar-section">
              <div id=experiments_(in process features)
                class="sidebar-section-title {% unless /documentation/experiments/experiments.html,/documentation/experiments/joins.html,/documentation/experiments/sql_expressions.html,/documentation/experiments/window.html,/documentation/experiments/parameters.html,/documentation/experiments/composite_sources.html,/documentation/experiments/include.html contains page.url)} %}collapsed-this-isnt-working-its-always-collapsed-ben-took-it-out{% endunless %}"
              >
                Experiments (in process features)
                <img class="chevron-open" src="/img/section_open.svg" alt="section open"/>
                <img class="chevron-closed" src="/img/section_close.svg" alt="section closed"/>
              </div>
              <div class="sidebar-section-item-group">
                <div class='sidebar-item '>
              <a href="/documentation/experiments/experiments">
                <img src="/img/article_icon.svg" alt="document"/>
                Experiments
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/experiments/joins">
                <img src="/img/article_icon.svg" alt="document"/>
                Join INNER/RIGHT/FULL
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/experiments/sql_expressions">
                <img src="/img/article_icon.svg" alt="document"/>
                SQL Expressions
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/experiments/window">
                <img src="/img/article_icon.svg" alt="document"/>
                Window Partitions
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/experiments/parameters">
                <img src="/img/article_icon.svg" alt="document"/>
                Parameters
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/experiments/composite_sources">
                <img src="/img/article_icon.svg" alt="document"/>
                Composite "Cube" Sources
              </a>
            </div>
        <div class='sidebar-item '>
              <a href="/documentation/experiments/include">
                <img src="/img/article_icon.svg" alt="document"/>
                Access Modifiers
              </a>
            </div>
              </div>
            </div>
          </div>        <script src="/js/sidebar_state.js"></script>
        <div class="content">
          <div class="footer">
            
<div class="linear-navigation">
  <div class="item">
      <a href="foreign_sums.html"><img src="/img/previous.svg" alt="previous"/>Foreign Sums and Averages</a>
  </div>
  <div class="item">
      <a href="percent_of_total.html">Percent of Total<img src="/img/next.svg" alt="next"/></a>
  </div>
</div> 
          </div>
          <div class="document-outer"><div class="document"><div class="title-row">
        
      <h1>
        <a id="working-with-nested-data" class="header-link anchor" href="#working-with-nested-data">
          Working with Nested Data
        </a>
      </h1>
    
        <a class="edit-link" target="_blank" href="https://github.dev/malloydata/malloydata.github.io/blob/main/src/documentation/patterns/reading_nested.malloynb#C1">VSCode <img src="/img/open_notebook.svg" alt="document"/></a>
        </div>
      <p>Data often comes in a nested structure, where information is organized hierarchically. BigQuery and DuckDB have built-in support for reading tables with nested data and extracting information from these nested structures.</p>
<p>Working with nested data in Malloy is remarkably simple. In Malloy, a nested array or struct is treated as a built-in <code class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #AF00DB">join_many</span></span></code> operation. You can effortlessly access the desired data using dot notation.</p>
<p>For example, in Google Analytics data, the top level object is sessions. There are repeated structures such as hits, pageviews, and products and more. Querying this data in SQL is difficult.</p>
<p>Below is the <em>partial</em> schema for Google Analytics.</p>
<img src="./ga_schema.webp" style="width: 100%"><p>To perform aggregate calculations in Malloy, you can simply specify the complete path to the numeric value and select the appropriate aggregate function. Malloy refers to this as aggregate locality, ensuring accurate calculations regardless of the join pattern used.</p>

      <h2>
        <a id="a-simple-google-analytics-semantic-model" class="header-link anchor" href="#a-simple-google-analytics-semantic-model">
          A simple Google Analytics Semantic model
        </a>
      </h2>
    <p>Here is a very simple Malloy model describing some interesting calculations on Google Analytics data:</p>
<div class="code-wrapper"><a href="https://github.dev/malloydata/malloydata.github.io/blob/main/src/documentation/patterns/reading_nested.malloynb#C2" target="_blank" class="open_notebook"><img src="/img/open_notebook.svg" alt="document"/></a><pre class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #AF00DB">source</span><span style="color: #000000">: </span><span style="color: #001080">ga_sessions</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">duckdb</span><span style="color: #000000">.</span><span style="color: #795E26">table</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;../data/ga_sample.parquet&#39;</span><span style="color: #000000">) </span><span style="color: #AF00DB">extend</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">measure</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">user_count</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #001080">fullVisitorId</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5"># percent</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">percent_of_users</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">user_count</span><span style="color: #000000"> / </span><span style="color: #795E26">all</span><span style="color: #000000">(</span><span style="color: #001080">user_count</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">session_count</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #795E26">count</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_visits</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">totals</span><span style="color: #000000">.</span><span style="color: #001080">visits</span><span style="color: #000000">.</span><span style="color: #795E26">sum</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_hits</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">totals</span><span style="color: #000000">.</span><span style="color: #001080">hits</span><span style="color: #000000">.</span><span style="color: #795E26">sum</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_page_views</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">totals</span><span style="color: #000000">.</span><span style="color: #001080">pageviews</span><span style="color: #000000">.</span><span style="color: #795E26">sum</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">t2</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">totals</span><span style="color: #000000">.</span><span style="color: #001080">pageviews</span><span style="color: #000000">.</span><span style="color: #795E26">sum</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_product_revenue</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">hits</span><span style="color: #000000">.</span><span style="color: #001080">product</span><span style="color: #000000">.</span><span style="color: #001080">productRevenue</span><span style="color: #000000">.</span><span style="color: #795E26">sum</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">hits_count</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">hits</span><span style="color: #000000">.</span><span style="color: #795E26">count</span><span style="color: #000000">()</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">sold_count</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000"> </span><span style="color: #001080">hits</span><span style="color: #000000">.</span><span style="color: #795E26">count</span><span style="color: #000000">() { </span><span style="color: #AF00DB">where</span><span style="color: #000000">: </span><span style="color: #001080">hits</span><span style="color: #000000">.</span><span style="color: #001080">product</span><span style="color: #000000">.</span><span style="color: #001080">productQuantity</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000"> }</span></span>
<span class="line"><span style="color: #000000">}</span></span></pre></div>
      <h2>
        <a id="show-data-by-traffic-source" class="header-link anchor" href="#show-data-by-traffic-source">
          Show Data by Traffic Source
        </a>
      </h2>
    <div class="code-wrapper"><a href="https://github.dev/malloydata/malloydata.github.io/blob/main/src/documentation/patterns/reading_nested.malloynb#C4" target="_blank" class="open_notebook"><img src="/img/open_notebook.svg" alt="document"/></a><pre class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #AF00DB">run</span><span style="color: #000000">: </span><span style="color: #001080">ga_sessions</span><span style="color: #000000"> -&gt; {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">where</span><span style="color: #000000">: </span><span style="color: #001080">trafficSource</span><span style="color: #000000">.</span><span style="color: #001080">`source`</span><span style="color: #000000"> != </span><span style="color: #A31515">&#39;(direct)&#39;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">group_by</span><span style="color: #000000">: </span><span style="color: #001080">trafficSource</span><span style="color: #000000">.</span><span style="color: #001080">`source`</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">aggregate</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">user_count</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">percent_of_users</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">hits_count</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_visits</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">session_count</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">limit</span><span style="color: #000000">: </span><span style="color: #098658">10</span></span>
<span class="line"><span style="color: #000000">}</span></span></pre><div class="result-outer large">
    <div class="result-controls-bar">
      <span class="result-label">QUERY RESULTS</span>
      <div class="result-controls">
        <button class="result-control" selected data-result-kind="html">HTML</button>
        <button class="result-control"  data-result-kind="json">JSON</button>
        <button class="result-control"  data-result-kind="sql">SQL</button>
      </div>
    </div>
    <div class="result-middle" data-result-kind="html" selected>
      <div class="result-inner" id="215cd291-9ac9-4aa0-bd4c-5c81e0a1f665">
        <script>(()=>{var e=document.getElementById("215cd291-9ac9-4aa0-bd4c-5c81e0a1f665"),n=document.createElement("malloy-render");n.modelDef={name:"",exports:["ga_sessions"],contents:{ga_sessions:{type:"table",name:"duckdb:../data/ga_sample.parquet",dialect:"duckdb",tablePath:"../data/ga_sample.parquet",connection:"duckdb",fields:[{type:"number",numberType:"integer",name:"visitorId",fieldUsage:[{path:["visitorId"]}]},{type:"number",numberType:"integer",name:"visitNumber",fieldUsage:[{path:["visitNumber"]}]},{type:"number",numberType:"integer",name:"visitId",fieldUsage:[{path:["visitId"]}]},{type:"number",numberType:"integer",name:"visitStartTime",fieldUsage:[{path:["visitStartTime"]}]},{type:"string",name:"date",fieldUsage:[{path:["date"]}]},{type:"string",name:"fullVisitorId",fieldUsage:[{path:["fullVisitorId"]}]},{type:"string",name:"userId",fieldUsage:[{path:["userId"]}]},{type:"string",name:"clientId",fieldUsage:[{path:["clientId"]}]},{type:"string",name:"channelGrouping",fieldUsage:[{path:["channelGrouping"]}]},{type:"string",name:"socialEngagementType",fieldUsage:[{path:["socialEngagementType"]}]},{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"],sql:'(CASE WHEN group_set=1 THEN\n  count(distinct base."fullVisitorId")\n  END)'},right:{node:"all",e:{node:"field",path:["user_count"]},sql:'MAX((CASE WHEN group_set=0 THEN\n  count(distinct base."fullVisitorId")\n  END)) OVER ()'}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},{type:"number",numberType:"integer",name:"session_count",e:{node:"aggregate",function:"count",e:{node:""}},fieldUsage:[],expressionType:"aggregate",code:"count()"},{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},{type:"number",numberType:"integer",name:"total_hits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","hits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.hits.sum()"},{type:"number",numberType:"integer",name:"total_page_views",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"t2",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"total_product_revenue",e:{node:"aggregate",function:"sum",e:{node:"field",path:["hits","product","productRevenue"]},structPath:["hits","product"]},fieldUsage:[],expressionType:"aggregate",code:"hits.product.productRevenue.sum()"},{type:"number",numberType:"integer",name:"hits_count",e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},fieldUsage:[],expressionType:"aggregate",code:"hits.count()"},{type:"number",numberType:"integer",name:"sold_count",e:{node:"filteredExpr",kids:{e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},filterList:[{node:"filterCondition",code:"hits.product.productQuantity > 0",e:{node:">",kids:{left:{node:"field",path:["hits","product","productQuantity"]},right:{node:"numberLiteral",literal:"0"}}},expressionType:"scalar",fieldUsage:[{path:["hits","product","productQuantity"]}]}]}},fieldUsage:[{path:["hits","product","productQuantity"]}],expressionType:"aggregate",code:"hits.count() { where: hits.product.productQuantity > 0 }"},{type:"record",fields:[{type:"number",numberType:"integer",name:"visits"},{type:"number",numberType:"integer",name:"hits"},{type:"number",numberType:"integer",name:"pageviews"},{type:"number",numberType:"integer",name:"timeOnSite"},{type:"number",numberType:"integer",name:"bounces"},{type:"number",numberType:"integer",name:"transactions"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"newVisits"},{type:"number",numberType:"integer",name:"screenviews"},{type:"number",numberType:"integer",name:"uniqueScreenviews"},{type:"number",numberType:"integer",name:"timeOnScreen"},{type:"number",numberType:"integer",name:"totalTransactionRevenue"},{type:"number",numberType:"integer",name:"sessionQualityDim"}],join:"one",name:"totals",fieldUsage:[{path:["totals"]}]},{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},{type:"record",fields:[{type:"string",name:"continent"},{type:"string",name:"subContinent"},{type:"string",name:"country"},{type:"string",name:"region"},{type:"string",name:"metro"},{type:"string",name:"city"},{type:"string",name:"cityId"},{type:"string",name:"networkDomain"},{type:"string",name:"latitude"},{type:"string",name:"longitude"},{type:"string",name:"networkLocation"}],join:"one",name:"geoNetwork",fieldUsage:[{path:["geoNetwork"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions",fieldUsage:[{path:["customDimensions"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"hitNumber"},{type:"number",numberType:"integer",name:"time"},{type:"number",numberType:"integer",name:"hour"},{type:"number",numberType:"integer",name:"minute"},{type:"boolean",name:"isSecure"},{type:"boolean",name:"isInteraction"},{type:"boolean",name:"isEntrance"},{type:"boolean",name:"isExit"},{type:"string",name:"referer"},{type:"record",fields:[{type:"string",name:"pagePath"},{type:"string",name:"hostname"},{type:"string",name:"pageTitle"},{type:"string",name:"searchKeyword"},{type:"string",name:"searchCategory"},{type:"string",name:"pagePathLevel1"},{type:"string",name:"pagePathLevel2"},{type:"string",name:"pagePathLevel3"},{type:"string",name:"pagePathLevel4"}],join:"one",name:"page"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"transactionTax"},{type:"number",numberType:"integer",name:"transactionShipping"},{type:"string",name:"affiliation"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localTransactionRevenue"},{type:"number",numberType:"integer",name:"localTransactionTax"},{type:"number",numberType:"integer",name:"localTransactionShipping"},{type:"string",name:"transactionCoupon"}],join:"one",name:"transaction"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"string",name:"productName"},{type:"string",name:"productCategory"},{type:"string",name:"productSku"},{type:"number",numberType:"integer",name:"itemQuantity"},{type:"number",numberType:"integer",name:"itemRevenue"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localItemRevenue"}],join:"one",name:"item"},{type:"record",fields:[{type:"string",name:"contentDescription"}],join:"one",name:"contentInfo"},{type:"record",fields:[{type:"string",name:"name"},{type:"string",name:"version"},{type:"string",name:"id"},{type:"string",name:"installerId"},{type:"string",name:"appInstallerId"},{type:"string",name:"appName"},{type:"string",name:"appVersion"},{type:"string",name:"appId"},{type:"string",name:"screenName"},{type:"string",name:"landingScreenName"},{type:"string",name:"exitScreenName"},{type:"string",name:"screenDepth"}],join:"one",name:"appInfo"},{type:"record",fields:[{type:"string",name:"description"},{type:"boolean",name:"isFatal"},{type:"number",numberType:"integer",name:"exceptions"},{type:"number",numberType:"integer",name:"fatalExceptions"}],join:"one",name:"exceptionInfo"},{type:"record",fields:[{type:"string",name:"eventCategory"},{type:"string",name:"eventAction"},{type:"string",name:"eventLabel"},{type:"number",numberType:"integer",name:"eventValue"}],join:"one",name:"eventInfo"},{type:"array",fields:[{type:"string",name:"productSKU"},{type:"string",name:"v2ProductName"},{type:"string",name:"v2ProductCategory"},{type:"string",name:"productVariant"},{type:"string",name:"productBrand"},{type:"number",numberType:"integer",name:"productRevenue"},{type:"number",numberType:"integer",name:"localProductRevenue"},{type:"number",numberType:"integer",name:"productPrice"},{type:"number",numberType:"integer",name:"localProductPrice"},{type:"number",numberType:"integer",name:"productQuantity"},{type:"number",numberType:"integer",name:"productRefundAmount"},{type:"number",numberType:"integer",name:"localProductRefundAmount"},{type:"boolean",name:"isImpression"},{type:"boolean",name:"isClick"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"productListName"},{type:"number",numberType:"integer",name:"productListPosition"},{type:"string",name:"productCouponCode"}],elementTypeDef:{type:"record_element"},join:"many",name:"product"},{type:"array",fields:[{type:"string",name:"promoId"},{type:"string",name:"promoName"},{type:"string",name:"promoCreative"},{type:"string",name:"promoPosition"}],elementTypeDef:{type:"record_element"},join:"many",name:"promotion"},{type:"record",fields:[{type:"boolean",name:"promoIsView"},{type:"boolean",name:"promoIsClick"}],join:"one",name:"promotionActionInfo"},{type:"record",fields:[{type:"number",numberType:"integer",name:"refundAmount"},{type:"number",numberType:"integer",name:"localRefundAmount"}],join:"one",name:"refund"},{type:"record",fields:[{type:"string",name:"action_type"},{type:"number",numberType:"integer",name:"step"},{type:"string",name:"option"}],join:"one",name:"eCommerceAction"},{type:"array",fields:[{type:"string",name:"experimentId"},{type:"string",name:"experimentVariant"}],elementTypeDef:{type:"record_element"},join:"many",name:"experiment"},{type:"record",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],join:"one",name:"publisher"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"customVarName"},{type:"string",name:"customVarValue"}],elementTypeDef:{type:"record_element"},join:"many",name:"customVariables"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"type"},{type:"record",fields:[{type:"string",name:"socialInteractionNetwork"},{type:"string",name:"socialInteractionAction"},{type:"number",numberType:"integer",name:"socialInteractions"},{type:"string",name:"socialInteractionTarget"},{type:"string",name:"socialNetwork"},{type:"number",numberType:"integer",name:"uniqueSocialInteractions"},{type:"string",name:"hasSocialSourceReferral"},{type:"string",name:"socialInteractionNetworkAction"}],join:"one",name:"social"},{type:"record",fields:[{type:"number",numberType:"integer",name:"pageLoadSample"},{type:"number",numberType:"integer",name:"pageLoadTime"},{type:"number",numberType:"integer",name:"pageDownloadTime"},{type:"number",numberType:"integer",name:"redirectionTime"},{type:"number",numberType:"integer",name:"speedMetricsSample"},{type:"number",numberType:"integer",name:"domainLookupTime"},{type:"number",numberType:"integer",name:"serverConnectionTime"},{type:"number",numberType:"integer",name:"serverResponseTime"},{type:"number",numberType:"integer",name:"domLatencyMetricsSample"},{type:"number",numberType:"integer",name:"domInteractiveTime"},{type:"number",numberType:"integer",name:"domContentLoadedTime"},{type:"number",numberType:"integer",name:"userTimingValue"},{type:"number",numberType:"integer",name:"userTimingSample"},{type:"string",name:"userTimingVariable"},{type:"string",name:"userTimingCategory"},{type:"string",name:"userTimingLabel"}],join:"one",name:"latencyTracking"},{type:"record",fields:[{type:"string",name:"sourcePropertyDisplayName"},{type:"string",name:"sourcePropertyTrackingId"}],join:"one",name:"sourcePropertyInfo"},{type:"record",fields:[{type:"string",name:"contentGroup1"},{type:"string",name:"contentGroup2"},{type:"string",name:"contentGroup3"},{type:"string",name:"contentGroup4"},{type:"string",name:"contentGroup5"},{type:"string",name:"previousContentGroup1"},{type:"string",name:"previousContentGroup2"},{type:"string",name:"previousContentGroup3"},{type:"string",name:"previousContentGroup4"},{type:"string",name:"previousContentGroup5"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews1"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews2"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews3"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews4"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews5"}],join:"one",name:"contentGroup"},{type:"string",name:"dataSource"},{type:"array",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],elementTypeDef:{type:"record_element"},join:"many",name:"publisher_infos"}],elementTypeDef:{type:"record_element"},join:"many",name:"hits",fieldUsage:[{path:["hits"]}]}],parameters:{},as:"ga_sessions"}},queryList:[{type:"query",structRef:"ga_sessions",sourceArguments:{},pipeline:[{type:"reduce",queryFields:[{type:"fieldref",path:["trafficSource","source"]},{type:"fieldref",path:["user_count"]},{type:"fieldref",path:["percent_of_users"],annotation:{inherits:{notes:[{text:"# percent\n"}]}}},{type:"fieldref",path:["hits_count"]},{type:"fieldref",path:["total_visits"]},{type:"fieldref",path:["session_count"]}],limit:10,filterList:[{node:"filterCondition",code:"trafficSource.`source` != '(direct)'",e:{node:"!=",kids:{left:{node:"field",path:["trafficSource","source"]},right:{node:"stringLiteral",literal:"(direct)"}}},expressionType:"scalar",fieldUsage:[{path:["trafficSource","source"]}]}],fieldUsage:[{path:["trafficSource","source"]},{path:["trafficSource","source"]},{path:["user_count"]},{path:["percent_of_users"]},{path:["hits_count"]},{path:["total_visits"]},{path:["session_count"]}],defaultOrderBy:!0,orderBy:[{field:"user_count",dir:"desc"}]}],annotation:{notes:[],blockNotes:[{text:"#(docs) size=large limit=5000\n"}]}}],dependencies:{},references:[{type:"exploreReference",text:"ga_sessions",definition:{type:"table",name:"duckdb:../data/ga_sample.parquet",dialect:"duckdb",tablePath:"../data/ga_sample.parquet",connection:"duckdb",fields:[{type:"number",numberType:"integer",name:"visitorId",fieldUsage:[{path:["visitorId"]}]},{type:"number",numberType:"integer",name:"visitNumber",fieldUsage:[{path:["visitNumber"]}]},{type:"number",numberType:"integer",name:"visitId",fieldUsage:[{path:["visitId"]}]},{type:"number",numberType:"integer",name:"visitStartTime",fieldUsage:[{path:["visitStartTime"]}]},{type:"string",name:"date",fieldUsage:[{path:["date"]}]},{type:"string",name:"fullVisitorId",fieldUsage:[{path:["fullVisitorId"]}]},{type:"string",name:"userId",fieldUsage:[{path:["userId"]}]},{type:"string",name:"clientId",fieldUsage:[{path:["clientId"]}]},{type:"string",name:"channelGrouping",fieldUsage:[{path:["channelGrouping"]}]},{type:"string",name:"socialEngagementType",fieldUsage:[{path:["socialEngagementType"]}]},{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"]},right:{node:"all",e:{node:"field",path:["user_count"]}}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},{type:"number",numberType:"integer",name:"session_count",e:{node:"aggregate",function:"count",e:{node:""}},fieldUsage:[],expressionType:"aggregate",code:"count()"},{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},{type:"number",numberType:"integer",name:"total_hits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","hits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.hits.sum()"},{type:"number",numberType:"integer",name:"total_page_views",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"t2",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"total_product_revenue",e:{node:"aggregate",function:"sum",e:{node:"field",path:["hits","product","productRevenue"]},structPath:["hits","product"]},fieldUsage:[],expressionType:"aggregate",code:"hits.product.productRevenue.sum()"},{type:"number",numberType:"integer",name:"hits_count",e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},fieldUsage:[],expressionType:"aggregate",code:"hits.count()"},{type:"number",numberType:"integer",name:"sold_count",e:{node:"filteredExpr",kids:{e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},filterList:[{node:"filterCondition",code:"hits.product.productQuantity > 0",e:{node:">",kids:{left:{node:"field",path:["hits","product","productQuantity"]},right:{node:"numberLiteral",literal:"0"}}},expressionType:"scalar",fieldUsage:[{path:["hits","product","productQuantity"]}]}]}},fieldUsage:[{path:["hits","product","productQuantity"]}],expressionType:"aggregate",code:"hits.count() { where: hits.product.productQuantity > 0 }"},{type:"record",fields:[{type:"number",numberType:"integer",name:"visits"},{type:"number",numberType:"integer",name:"hits"},{type:"number",numberType:"integer",name:"pageviews"},{type:"number",numberType:"integer",name:"timeOnSite"},{type:"number",numberType:"integer",name:"bounces"},{type:"number",numberType:"integer",name:"transactions"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"newVisits"},{type:"number",numberType:"integer",name:"screenviews"},{type:"number",numberType:"integer",name:"uniqueScreenviews"},{type:"number",numberType:"integer",name:"timeOnScreen"},{type:"number",numberType:"integer",name:"totalTransactionRevenue"},{type:"number",numberType:"integer",name:"sessionQualityDim"}],join:"one",name:"totals",fieldUsage:[{path:["totals"]}]},{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},{type:"record",fields:[{type:"string",name:"continent"},{type:"string",name:"subContinent"},{type:"string",name:"country"},{type:"string",name:"region"},{type:"string",name:"metro"},{type:"string",name:"city"},{type:"string",name:"cityId"},{type:"string",name:"networkDomain"},{type:"string",name:"latitude"},{type:"string",name:"longitude"},{type:"string",name:"networkLocation"}],join:"one",name:"geoNetwork",fieldUsage:[{path:["geoNetwork"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions",fieldUsage:[{path:["customDimensions"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"hitNumber"},{type:"number",numberType:"integer",name:"time"},{type:"number",numberType:"integer",name:"hour"},{type:"number",numberType:"integer",name:"minute"},{type:"boolean",name:"isSecure"},{type:"boolean",name:"isInteraction"},{type:"boolean",name:"isEntrance"},{type:"boolean",name:"isExit"},{type:"string",name:"referer"},{type:"record",fields:[{type:"string",name:"pagePath"},{type:"string",name:"hostname"},{type:"string",name:"pageTitle"},{type:"string",name:"searchKeyword"},{type:"string",name:"searchCategory"},{type:"string",name:"pagePathLevel1"},{type:"string",name:"pagePathLevel2"},{type:"string",name:"pagePathLevel3"},{type:"string",name:"pagePathLevel4"}],join:"one",name:"page"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"transactionTax"},{type:"number",numberType:"integer",name:"transactionShipping"},{type:"string",name:"affiliation"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localTransactionRevenue"},{type:"number",numberType:"integer",name:"localTransactionTax"},{type:"number",numberType:"integer",name:"localTransactionShipping"},{type:"string",name:"transactionCoupon"}],join:"one",name:"transaction"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"string",name:"productName"},{type:"string",name:"productCategory"},{type:"string",name:"productSku"},{type:"number",numberType:"integer",name:"itemQuantity"},{type:"number",numberType:"integer",name:"itemRevenue"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localItemRevenue"}],join:"one",name:"item"},{type:"record",fields:[{type:"string",name:"contentDescription"}],join:"one",name:"contentInfo"},{type:"record",fields:[{type:"string",name:"name"},{type:"string",name:"version"},{type:"string",name:"id"},{type:"string",name:"installerId"},{type:"string",name:"appInstallerId"},{type:"string",name:"appName"},{type:"string",name:"appVersion"},{type:"string",name:"appId"},{type:"string",name:"screenName"},{type:"string",name:"landingScreenName"},{type:"string",name:"exitScreenName"},{type:"string",name:"screenDepth"}],join:"one",name:"appInfo"},{type:"record",fields:[{type:"string",name:"description"},{type:"boolean",name:"isFatal"},{type:"number",numberType:"integer",name:"exceptions"},{type:"number",numberType:"integer",name:"fatalExceptions"}],join:"one",name:"exceptionInfo"},{type:"record",fields:[{type:"string",name:"eventCategory"},{type:"string",name:"eventAction"},{type:"string",name:"eventLabel"},{type:"number",numberType:"integer",name:"eventValue"}],join:"one",name:"eventInfo"},{type:"array",fields:[{type:"string",name:"productSKU"},{type:"string",name:"v2ProductName"},{type:"string",name:"v2ProductCategory"},{type:"string",name:"productVariant"},{type:"string",name:"productBrand"},{type:"number",numberType:"integer",name:"productRevenue"},{type:"number",numberType:"integer",name:"localProductRevenue"},{type:"number",numberType:"integer",name:"productPrice"},{type:"number",numberType:"integer",name:"localProductPrice"},{type:"number",numberType:"integer",name:"productQuantity"},{type:"number",numberType:"integer",name:"productRefundAmount"},{type:"number",numberType:"integer",name:"localProductRefundAmount"},{type:"boolean",name:"isImpression"},{type:"boolean",name:"isClick"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"productListName"},{type:"number",numberType:"integer",name:"productListPosition"},{type:"string",name:"productCouponCode"}],elementTypeDef:{type:"record_element"},join:"many",name:"product"},{type:"array",fields:[{type:"string",name:"promoId"},{type:"string",name:"promoName"},{type:"string",name:"promoCreative"},{type:"string",name:"promoPosition"}],elementTypeDef:{type:"record_element"},join:"many",name:"promotion"},{type:"record",fields:[{type:"boolean",name:"promoIsView"},{type:"boolean",name:"promoIsClick"}],join:"one",name:"promotionActionInfo"},{type:"record",fields:[{type:"number",numberType:"integer",name:"refundAmount"},{type:"number",numberType:"integer",name:"localRefundAmount"}],join:"one",name:"refund"},{type:"record",fields:[{type:"string",name:"action_type"},{type:"number",numberType:"integer",name:"step"},{type:"string",name:"option"}],join:"one",name:"eCommerceAction"},{type:"array",fields:[{type:"string",name:"experimentId"},{type:"string",name:"experimentVariant"}],elementTypeDef:{type:"record_element"},join:"many",name:"experiment"},{type:"record",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],join:"one",name:"publisher"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"customVarName"},{type:"string",name:"customVarValue"}],elementTypeDef:{type:"record_element"},join:"many",name:"customVariables"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"type"},{type:"record",fields:[{type:"string",name:"socialInteractionNetwork"},{type:"string",name:"socialInteractionAction"},{type:"number",numberType:"integer",name:"socialInteractions"},{type:"string",name:"socialInteractionTarget"},{type:"string",name:"socialNetwork"},{type:"number",numberType:"integer",name:"uniqueSocialInteractions"},{type:"string",name:"hasSocialSourceReferral"},{type:"string",name:"socialInteractionNetworkAction"}],join:"one",name:"social"},{type:"record",fields:[{type:"number",numberType:"integer",name:"pageLoadSample"},{type:"number",numberType:"integer",name:"pageLoadTime"},{type:"number",numberType:"integer",name:"pageDownloadTime"},{type:"number",numberType:"integer",name:"redirectionTime"},{type:"number",numberType:"integer",name:"speedMetricsSample"},{type:"number",numberType:"integer",name:"domainLookupTime"},{type:"number",numberType:"integer",name:"serverConnectionTime"},{type:"number",numberType:"integer",name:"serverResponseTime"},{type:"number",numberType:"integer",name:"domLatencyMetricsSample"},{type:"number",numberType:"integer",name:"domInteractiveTime"},{type:"number",numberType:"integer",name:"domContentLoadedTime"},{type:"number",numberType:"integer",name:"userTimingValue"},{type:"number",numberType:"integer",name:"userTimingSample"},{type:"string",name:"userTimingVariable"},{type:"string",name:"userTimingCategory"},{type:"string",name:"userTimingLabel"}],join:"one",name:"latencyTracking"},{type:"record",fields:[{type:"string",name:"sourcePropertyDisplayName"},{type:"string",name:"sourcePropertyTrackingId"}],join:"one",name:"sourcePropertyInfo"},{type:"record",fields:[{type:"string",name:"contentGroup1"},{type:"string",name:"contentGroup2"},{type:"string",name:"contentGroup3"},{type:"string",name:"contentGroup4"},{type:"string",name:"contentGroup5"},{type:"string",name:"previousContentGroup1"},{type:"string",name:"previousContentGroup2"},{type:"string",name:"previousContentGroup3"},{type:"string",name:"previousContentGroup4"},{type:"string",name:"previousContentGroup5"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews1"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews2"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews3"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews4"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews5"}],join:"one",name:"contentGroup"},{type:"string",name:"dataSource"},{type:"array",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],elementTypeDef:{type:"record_element"},join:"many",name:"publisher_infos"}],elementTypeDef:{type:"record_element"},join:"many",name:"hits",fieldUsage:[{path:["hits"]}]}],parameters:{},as:"ga_sessions"}},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},text:"trafficSource"},{type:"fieldReference",definition:{type:"string",name:"source"},text:"source"},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},text:"trafficSource"},{type:"fieldReference",definition:{type:"string",name:"source"},text:"source"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},text:"user_count"},{type:"fieldReference",definition:{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"]},right:{node:"all",e:{node:"field",path:["user_count"]}}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},text:"percent_of_users"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"hits_count",e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},fieldUsage:[],expressionType:"aggregate",code:"hits.count()"},text:"hits_count"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},text:"total_visits"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"session_count",e:{node:"aggregate",function:"count",e:{node:""}},fieldUsage:[],expressionType:"aggregate",code:"count()"},text:"session_count"},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},text:"trafficSource"}],imports:[]},n.queryResult={lastStageName:"__stage1",malloy:"",sql:'WITH __stage0 AS (\n  SELECT\n    group_set,\n    CASE WHEN group_set=1 THEN\n      base."trafficSource"."source"\n      END as "source__1",\n    CASE WHEN group_set=1 THEN\n      count(distinct base."fullVisitorId")\n      END as "user_count__1",\n    (CASE WHEN group_set=1 THEN\n      count(distinct base."fullVisitorId")\n      END)*1.0/MAX((CASE WHEN group_set=0 THEN\n      count(distinct base."fullVisitorId")\n      END)) OVER () as "percent_of_users__1",\n    CASE WHEN group_set=1 THEN\n      COUNT(DISTINCT base."__distinct_key" || \'x\' || hits_0_outer.__row_id)\n      END as "hits_count__1",\n    CASE WHEN group_set=1 THEN\n      COALESCE((\n          SELECT SUM(a.val) as value\n          FROM (\n            SELECT UNNEST(list(distinct {key:base."__distinct_key", val: base."totals"."visits"})) a\n          )\n        ),0)\n      END as "total_visits__1",\n    CASE WHEN group_set=1 THEN\n      COUNT(DISTINCT base."__distinct_key")\n      END as "session_count__1"\n  FROM (SELECT GEN_RANDOM_UUID() as "__distinct_key", x.*  FROM \'../data/ga_sample.parquet\' as x) as base\n  LEFT JOIN LATERAL (SELECT UNNEST(GENERATE_SERIES(1, length(base."hits"),1)) as __row_id, UNNEST(base."hits"), 1 as ignoreme) as hits_0_outer(__row_id, hits_0,ignoreme) ON  hits_0_outer.ignoreme=1\n  CROSS JOIN (SELECT UNNEST(GENERATE_SERIES(0,1,1)) as group_set  ) as group_set\n  WHERE COALESCE(base."trafficSource"."source"!=\'(direct)\',true)\n  GROUP BY 1,2\n)\nSELECT\n  "source__1" as "source",\n  MAX(CASE WHEN group_set=1 THEN "user_count__1" END) as "user_count",\n  MAX(CASE WHEN group_set=1 THEN "percent_of_users__1" END) as "percent_of_users",\n  MAX(CASE WHEN group_set=1 THEN "hits_count__1" END) as "hits_count",\n  MAX(CASE WHEN group_set=1 THEN "total_visits__1" END) as "total_visits",\n  MAX(CASE WHEN group_set=1 THEN "session_count__1" END) as "session_count"\nFROM __stage0\nWHERE group_set NOT IN (0)\nGROUP BY 1\nORDER BY 2 desc NULLS LAST\nLIMIT 10\n',dependenciesToMaterialize:{},structs:[{type:"query_result",name:"__stage1",fields:[{name:"source",type:"string",resultMetadata:{sourceField:"trafficSource.source",sourceClasses:["trafficSource.source"],referenceId:"c3c07bcd-c2c7-47f3-be0c-89238fcc56f0",fieldKind:"dimension"}},{name:"user_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"user_count",sourceExpression:"count(fullVisitorId)",sourceClasses:["user_count"],referenceId:"d00b8b60-c21b-4cf0-b1dd-6f3f41dfd6ee",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:2,character:4},end:{line:2,character:38}}}},{name:"percent_of_users",type:"number",resultMetadata:{sourceField:"percent_of_users",sourceExpression:"user_count / all(user_count)",sourceClasses:["percent_of_users"],referenceId:"e85d142b-0b6d-47ce-8ca1-3b12e00fe0ef",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:3,character:4},end:{line:4,character:52}}},annotation:{inherits:{notes:[{text:"# percent\n",at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:3,character:4},end:{line:3,character:14}}}}]}}},{name:"hits_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"hits_count",sourceExpression:"hits.count()",sourceClasses:["hits_count"],referenceId:"5bf9867a-678d-4b23-8f47-de151771ae3b",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:11,character:4},end:{line:11,character:30}}}},{name:"total_visits",numberType:"integer",type:"number",resultMetadata:{sourceField:"total_visits",sourceExpression:"totals.visits.sum()",sourceClasses:["total_visits"],referenceId:"60b9565d-2751-4320-8395-14861c5b7447",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:6,character:4},end:{line:6,character:39}}}},{name:"session_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"session_count",sourceExpression:"count()",sourceClasses:["session_count"],referenceId:"df8d1c55-954e-4746-87e7-d98164741533",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:5,character:4},end:{line:5,character:28}}}}],dialect:"duckdb",primaryKey:"source",connection:"duckdb",resultMetadata:{sourceField:"ignoreme",filterList:[{node:"filterCondition",code:"trafficSource.`source` != '(direct)'",e:{node:"!=",kids:{left:{node:"field",path:["trafficSource","source"],at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:2,character:9},end:{line:2,character:31}}},sql:'base."trafficSource"."source"'},right:{node:"stringLiteral",literal:"(direct)",sql:"'(direct)'"}}},expressionType:"scalar",fieldUsage:[{path:["trafficSource","source"],at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:2,character:9},end:{line:2,character:31}}}}]}],sourceClasses:["ignoreme"],fieldKind:"struct",limit:10,orderBy:[{field:"user_count",dir:"desc"}],drillable:!0}}],sourceExplore:"ga_sessions",sourceArguments:{},connectionName:"duckdb",annotation:{notes:[],blockNotes:[{text:"#(docs) size=large limit=5000\n",at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:0,character:0},end:{line:0,character:30}}}}]},result:[{source:"youtube.com",user_count:178,percent_of_users:.48501362397820164,hits_count:328,total_visits:180,session_count:180},{source:"analytics.google.com",user_count:53,percent_of_users:.1444141689373297,hits_count:114,total_visits:57,session_count:57},{source:"Partners",user_count:49,percent_of_users:.1335149863760218,hits_count:149,total_visits:52,session_count:52},{source:"google.com",user_count:11,percent_of_users:.02997275204359673,hits_count:35,total_visits:12,session_count:12},{source:"sites.google.com",user_count:8,percent_of_users:.021798365122615803,hits_count:34,total_visits:8,session_count:8},{source:"dfa",user_count:8,percent_of_users:.021798365122615803,hits_count:64,total_visits:15,session_count:15},{source:"facebook.com",user_count:7,percent_of_users:.01907356948228883,hits_count:36,total_visits:7,session_count:7},{source:"baidu",user_count:5,percent_of_users:.013623978201634877,hits_count:10,total_visits:5,session_count:5},{source:"quora.com",user_count:5,percent_of_users:.013623978201634877,hits_count:12,total_visits:6,session_count:6},{source:"reddit.com",user_count:4,percent_of_users:.010899182561307902,hits_count:14,total_visits:4,session_count:4}],totalRows:10},e.appendChild(n)})();</script>
      </div>
    </div>
    <div class="result-middle" data-result-kind="json" >
      <div class="result-inner">
        <pre><pre class="language-json" style="background-color: #FBFBFB"><span class="line"><span style="color: #000000">[</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">178</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.48501362397820164</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">328</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">180</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">180</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;analytics.google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">53</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.1444141689373297</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">114</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">57</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">57</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Partners&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">49</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.1335149863760218</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">149</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">52</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">52</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">11</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.02997275204359673</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">35</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">12</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">12</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;sites.google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.021798365122615803</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">34</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;dfa&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.021798365122615803</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">64</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">7</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.01907356948228883</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">36</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">7</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">7</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;baidu&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.013623978201634877</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">5</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;quora.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.013623978201634877</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">12</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;reddit.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.010899182561307902</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">14</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">]</span></span></pre></pre>
      </div>
    </div>
    <div class="result-middle" data-result-kind="sql" >
      <div class="result-inner">
        <pre><pre class="language-sql" style="background-color: #FBFBFB"><span class="line"><span style="color: #0000FF">WITH</span><span style="color: #000000"> __stage0 </span><span style="color: #0000FF">AS</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">SELECT</span></span>
<span class="line"><span style="color: #000000">    group_set,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      base.</span><span style="color: #A31515">&quot;trafficSource&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;source&quot;</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;source__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    (</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">)*</span><span style="color: #098658">1</span><span style="color: #000000">.</span><span style="color: #098658">0</span><span style="color: #000000">/</span><span style="color: #795E26">MAX</span><span style="color: #000000">((</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">0</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">)) </span><span style="color: #0000FF">OVER</span><span style="color: #000000"> () </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COUNT</span><span style="color: #000000">(</span><span style="color: #0000FF">DISTINCT</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000"> || </span><span style="color: #A31515">&#39;x&#39;</span><span style="color: #000000"> || hits_0_outer.__row_id)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;hits_count__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">((</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> </span><span style="color: #795E26">SUM</span><span style="color: #000000">(a.val) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">value</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(list(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> {</span><span style="color: #0000FF">key</span><span style="color: #000000">:base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, val: base.</span><span style="color: #A31515">&quot;totals&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;visits&quot;</span><span style="color: #000000">})) a</span></span>
<span class="line"><span style="color: #000000">          )</span></span>
<span class="line"><span style="color: #000000">        ),</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COUNT</span><span style="color: #000000">(</span><span style="color: #0000FF">DISTINCT</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;session_count__1&quot;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> GEN_RANDOM_UUID() </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, x.*  </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;../data/ga_sample.parquet&#39;</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> x) </span><span style="color: #0000FF">as</span><span style="color: #000000"> base</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">LEFT JOIN</span><span style="color: #000000"> LATERAL (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(GENERATE_SERIES(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #0000FF">length</span><span style="color: #000000">(base.</span><span style="color: #A31515">&quot;hits&quot;</span><span style="color: #000000">),</span><span style="color: #098658">1</span><span style="color: #000000">)) </span><span style="color: #0000FF">as</span><span style="color: #000000"> __row_id, UNNEST(base.</span><span style="color: #A31515">&quot;hits&quot;</span><span style="color: #000000">), </span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> ignoreme) </span><span style="color: #0000FF">as</span><span style="color: #000000"> hits_0_outer(__row_id, hits_0,ignoreme) </span><span style="color: #0000FF">ON</span><span style="color: #000000">  hits_0_outer.ignoreme=</span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">CROSS</span><span style="color: #000000"> </span><span style="color: #0000FF">JOIN</span><span style="color: #000000"> (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(GENERATE_SERIES(</span><span style="color: #098658">0</span><span style="color: #000000">,</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">1</span><span style="color: #000000">)) </span><span style="color: #0000FF">as</span><span style="color: #000000"> group_set  ) </span><span style="color: #0000FF">as</span><span style="color: #000000"> group_set</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">WHERE</span><span style="color: #000000"> </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">(base.</span><span style="color: #A31515">&quot;trafficSource&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;source&quot;</span><span style="color: #000000">!=</span><span style="color: #A31515">&#39;(direct)&#39;</span><span style="color: #000000">,true)</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">GROUP BY</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">SELECT</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&quot;source__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;source&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;hits_count__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;hits_count&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;session_count__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;session_count&quot;</span></span>
<span class="line"><span style="color: #0000FF">FROM</span><span style="color: #000000"> __stage0</span></span>
<span class="line"><span style="color: #0000FF">WHERE</span><span style="color: #000000"> group_set </span><span style="color: #0000FF">NOT</span><span style="color: #000000"> </span><span style="color: #0000FF">IN</span><span style="color: #000000"> (</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">GROUP BY</span><span style="color: #000000"> </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #0000FF">ORDER BY</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">desc</span><span style="color: #000000"> NULLS </span><span style="color: #0000FF">LAST</span></span>
<span class="line"><span style="color: #0000FF">LIMIT</span><span style="color: #000000"> </span><span style="color: #098658">10</span></span>
<span class="line"></span></pre></pre>
      </div>
    </div>
  </div></div>
      <h2>
        <a id="show-data-by-browser" class="header-link anchor" href="#show-data-by-browser">
          Show Data By Browser
        </a>
      </h2>
    <div class="code-wrapper"><a href="https://github.dev/malloydata/malloydata.github.io/blob/main/src/documentation/patterns/reading_nested.malloynb#C6" target="_blank" class="open_notebook"><img src="/img/open_notebook.svg" alt="document"/></a><pre class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #AF00DB">run</span><span style="color: #000000">: </span><span style="color: #001080">ga_sessions</span><span style="color: #000000"> -&gt; {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">group_by</span><span style="color: #000000">: </span><span style="color: #001080">device</span><span style="color: #000000">.</span><span style="color: #001080">browser</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">aggregate</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">user_count</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">percent_of_users</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_visits</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_hits</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_page_views</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">sold_count</span></span>
<span class="line"><span style="color: #000000">}</span></span></pre><div class="result-outer large">
    <div class="result-controls-bar">
      <span class="result-label">QUERY RESULTS</span>
      <div class="result-controls">
        <button class="result-control" selected data-result-kind="html">HTML</button>
        <button class="result-control"  data-result-kind="json">JSON</button>
        <button class="result-control"  data-result-kind="sql">SQL</button>
      </div>
    </div>
    <div class="result-middle" data-result-kind="html" selected>
      <div class="result-inner" id="e4b4dcbe-e4ff-425d-a74c-b0da348c2d43">
        <script>(()=>{var e=document.getElementById("e4b4dcbe-e4ff-425d-a74c-b0da348c2d43"),n=document.createElement("malloy-render");n.modelDef={name:"",exports:["ga_sessions"],contents:{ga_sessions:{type:"table",name:"duckdb:../data/ga_sample.parquet",dialect:"duckdb",tablePath:"../data/ga_sample.parquet",connection:"duckdb",fields:[{type:"number",numberType:"integer",name:"visitorId",fieldUsage:[{path:["visitorId"]}]},{type:"number",numberType:"integer",name:"visitNumber",fieldUsage:[{path:["visitNumber"]}]},{type:"number",numberType:"integer",name:"visitId",fieldUsage:[{path:["visitId"]}]},{type:"number",numberType:"integer",name:"visitStartTime",fieldUsage:[{path:["visitStartTime"]}]},{type:"string",name:"date",fieldUsage:[{path:["date"]}]},{type:"string",name:"fullVisitorId",fieldUsage:[{path:["fullVisitorId"]}]},{type:"string",name:"userId",fieldUsage:[{path:["userId"]}]},{type:"string",name:"clientId",fieldUsage:[{path:["clientId"]}]},{type:"string",name:"channelGrouping",fieldUsage:[{path:["channelGrouping"]}]},{type:"string",name:"socialEngagementType",fieldUsage:[{path:["socialEngagementType"]}]},{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"],sql:'(CASE WHEN group_set=1 THEN\n  count(distinct base."fullVisitorId")\n  END)'},right:{node:"all",e:{node:"field",path:["user_count"]},sql:'MAX((CASE WHEN group_set=0 THEN\n  count(distinct base."fullVisitorId")\n  END)) OVER ()'}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},{type:"number",numberType:"integer",name:"session_count",e:{node:"aggregate",function:"count",e:{node:""}},fieldUsage:[],expressionType:"aggregate",code:"count()"},{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},{type:"number",numberType:"integer",name:"total_hits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","hits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.hits.sum()"},{type:"number",numberType:"integer",name:"total_page_views",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"t2",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"total_product_revenue",e:{node:"aggregate",function:"sum",e:{node:"field",path:["hits","product","productRevenue"]},structPath:["hits","product"]},fieldUsage:[],expressionType:"aggregate",code:"hits.product.productRevenue.sum()"},{type:"number",numberType:"integer",name:"hits_count",e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},fieldUsage:[],expressionType:"aggregate",code:"hits.count()"},{type:"number",numberType:"integer",name:"sold_count",e:{node:"filteredExpr",kids:{e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"],sql:"CASE WHEN group_set=1 THEN\n  COUNT(DISTINCT base.\"__distinct_key\" || 'x' || hits_0_outer.__row_id)\n  END"},filterList:[{node:"filterCondition",code:"hits.product.productQuantity > 0",e:{node:">",kids:{left:{node:"field",path:["hits","product","productQuantity"],sql:'product_0."productQuantity"'},right:{node:"numberLiteral",literal:"0",sql:"0"}}},expressionType:"scalar",fieldUsage:[{path:["hits","product","productQuantity"]}],sql:'(product_0."productQuantity">0)'}]}},fieldUsage:[{path:["hits","product","productQuantity"]}],expressionType:"aggregate",code:"hits.count() { where: hits.product.productQuantity > 0 }"},{type:"record",fields:[{type:"number",numberType:"integer",name:"visits"},{type:"number",numberType:"integer",name:"hits"},{type:"number",numberType:"integer",name:"pageviews"},{type:"number",numberType:"integer",name:"timeOnSite"},{type:"number",numberType:"integer",name:"bounces"},{type:"number",numberType:"integer",name:"transactions"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"newVisits"},{type:"number",numberType:"integer",name:"screenviews"},{type:"number",numberType:"integer",name:"uniqueScreenviews"},{type:"number",numberType:"integer",name:"timeOnScreen"},{type:"number",numberType:"integer",name:"totalTransactionRevenue"},{type:"number",numberType:"integer",name:"sessionQualityDim"}],join:"one",name:"totals",fieldUsage:[{path:["totals"]}]},{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},{type:"record",fields:[{type:"string",name:"continent"},{type:"string",name:"subContinent"},{type:"string",name:"country"},{type:"string",name:"region"},{type:"string",name:"metro"},{type:"string",name:"city"},{type:"string",name:"cityId"},{type:"string",name:"networkDomain"},{type:"string",name:"latitude"},{type:"string",name:"longitude"},{type:"string",name:"networkLocation"}],join:"one",name:"geoNetwork",fieldUsage:[{path:["geoNetwork"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions",fieldUsage:[{path:["customDimensions"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"hitNumber"},{type:"number",numberType:"integer",name:"time"},{type:"number",numberType:"integer",name:"hour"},{type:"number",numberType:"integer",name:"minute"},{type:"boolean",name:"isSecure"},{type:"boolean",name:"isInteraction"},{type:"boolean",name:"isEntrance"},{type:"boolean",name:"isExit"},{type:"string",name:"referer"},{type:"record",fields:[{type:"string",name:"pagePath"},{type:"string",name:"hostname"},{type:"string",name:"pageTitle"},{type:"string",name:"searchKeyword"},{type:"string",name:"searchCategory"},{type:"string",name:"pagePathLevel1"},{type:"string",name:"pagePathLevel2"},{type:"string",name:"pagePathLevel3"},{type:"string",name:"pagePathLevel4"}],join:"one",name:"page"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"transactionTax"},{type:"number",numberType:"integer",name:"transactionShipping"},{type:"string",name:"affiliation"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localTransactionRevenue"},{type:"number",numberType:"integer",name:"localTransactionTax"},{type:"number",numberType:"integer",name:"localTransactionShipping"},{type:"string",name:"transactionCoupon"}],join:"one",name:"transaction"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"string",name:"productName"},{type:"string",name:"productCategory"},{type:"string",name:"productSku"},{type:"number",numberType:"integer",name:"itemQuantity"},{type:"number",numberType:"integer",name:"itemRevenue"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localItemRevenue"}],join:"one",name:"item"},{type:"record",fields:[{type:"string",name:"contentDescription"}],join:"one",name:"contentInfo"},{type:"record",fields:[{type:"string",name:"name"},{type:"string",name:"version"},{type:"string",name:"id"},{type:"string",name:"installerId"},{type:"string",name:"appInstallerId"},{type:"string",name:"appName"},{type:"string",name:"appVersion"},{type:"string",name:"appId"},{type:"string",name:"screenName"},{type:"string",name:"landingScreenName"},{type:"string",name:"exitScreenName"},{type:"string",name:"screenDepth"}],join:"one",name:"appInfo"},{type:"record",fields:[{type:"string",name:"description"},{type:"boolean",name:"isFatal"},{type:"number",numberType:"integer",name:"exceptions"},{type:"number",numberType:"integer",name:"fatalExceptions"}],join:"one",name:"exceptionInfo"},{type:"record",fields:[{type:"string",name:"eventCategory"},{type:"string",name:"eventAction"},{type:"string",name:"eventLabel"},{type:"number",numberType:"integer",name:"eventValue"}],join:"one",name:"eventInfo"},{type:"array",fields:[{type:"string",name:"productSKU"},{type:"string",name:"v2ProductName"},{type:"string",name:"v2ProductCategory"},{type:"string",name:"productVariant"},{type:"string",name:"productBrand"},{type:"number",numberType:"integer",name:"productRevenue"},{type:"number",numberType:"integer",name:"localProductRevenue"},{type:"number",numberType:"integer",name:"productPrice"},{type:"number",numberType:"integer",name:"localProductPrice"},{type:"number",numberType:"integer",name:"productQuantity"},{type:"number",numberType:"integer",name:"productRefundAmount"},{type:"number",numberType:"integer",name:"localProductRefundAmount"},{type:"boolean",name:"isImpression"},{type:"boolean",name:"isClick"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"productListName"},{type:"number",numberType:"integer",name:"productListPosition"},{type:"string",name:"productCouponCode"}],elementTypeDef:{type:"record_element"},join:"many",name:"product"},{type:"array",fields:[{type:"string",name:"promoId"},{type:"string",name:"promoName"},{type:"string",name:"promoCreative"},{type:"string",name:"promoPosition"}],elementTypeDef:{type:"record_element"},join:"many",name:"promotion"},{type:"record",fields:[{type:"boolean",name:"promoIsView"},{type:"boolean",name:"promoIsClick"}],join:"one",name:"promotionActionInfo"},{type:"record",fields:[{type:"number",numberType:"integer",name:"refundAmount"},{type:"number",numberType:"integer",name:"localRefundAmount"}],join:"one",name:"refund"},{type:"record",fields:[{type:"string",name:"action_type"},{type:"number",numberType:"integer",name:"step"},{type:"string",name:"option"}],join:"one",name:"eCommerceAction"},{type:"array",fields:[{type:"string",name:"experimentId"},{type:"string",name:"experimentVariant"}],elementTypeDef:{type:"record_element"},join:"many",name:"experiment"},{type:"record",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],join:"one",name:"publisher"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"customVarName"},{type:"string",name:"customVarValue"}],elementTypeDef:{type:"record_element"},join:"many",name:"customVariables"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"type"},{type:"record",fields:[{type:"string",name:"socialInteractionNetwork"},{type:"string",name:"socialInteractionAction"},{type:"number",numberType:"integer",name:"socialInteractions"},{type:"string",name:"socialInteractionTarget"},{type:"string",name:"socialNetwork"},{type:"number",numberType:"integer",name:"uniqueSocialInteractions"},{type:"string",name:"hasSocialSourceReferral"},{type:"string",name:"socialInteractionNetworkAction"}],join:"one",name:"social"},{type:"record",fields:[{type:"number",numberType:"integer",name:"pageLoadSample"},{type:"number",numberType:"integer",name:"pageLoadTime"},{type:"number",numberType:"integer",name:"pageDownloadTime"},{type:"number",numberType:"integer",name:"redirectionTime"},{type:"number",numberType:"integer",name:"speedMetricsSample"},{type:"number",numberType:"integer",name:"domainLookupTime"},{type:"number",numberType:"integer",name:"serverConnectionTime"},{type:"number",numberType:"integer",name:"serverResponseTime"},{type:"number",numberType:"integer",name:"domLatencyMetricsSample"},{type:"number",numberType:"integer",name:"domInteractiveTime"},{type:"number",numberType:"integer",name:"domContentLoadedTime"},{type:"number",numberType:"integer",name:"userTimingValue"},{type:"number",numberType:"integer",name:"userTimingSample"},{type:"string",name:"userTimingVariable"},{type:"string",name:"userTimingCategory"},{type:"string",name:"userTimingLabel"}],join:"one",name:"latencyTracking"},{type:"record",fields:[{type:"string",name:"sourcePropertyDisplayName"},{type:"string",name:"sourcePropertyTrackingId"}],join:"one",name:"sourcePropertyInfo"},{type:"record",fields:[{type:"string",name:"contentGroup1"},{type:"string",name:"contentGroup2"},{type:"string",name:"contentGroup3"},{type:"string",name:"contentGroup4"},{type:"string",name:"contentGroup5"},{type:"string",name:"previousContentGroup1"},{type:"string",name:"previousContentGroup2"},{type:"string",name:"previousContentGroup3"},{type:"string",name:"previousContentGroup4"},{type:"string",name:"previousContentGroup5"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews1"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews2"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews3"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews4"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews5"}],join:"one",name:"contentGroup"},{type:"string",name:"dataSource"},{type:"array",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],elementTypeDef:{type:"record_element"},join:"many",name:"publisher_infos"}],elementTypeDef:{type:"record_element"},join:"many",name:"hits",fieldUsage:[{path:["hits"]}]}],parameters:{},as:"ga_sessions"}},queryList:[{type:"query",structRef:"ga_sessions",sourceArguments:{},pipeline:[{type:"reduce",queryFields:[{type:"fieldref",path:["device","browser"]},{type:"fieldref",path:["user_count"]},{type:"fieldref",path:["percent_of_users"],annotation:{inherits:{notes:[{text:"# percent\n"}]}}},{type:"fieldref",path:["total_visits"]},{type:"fieldref",path:["total_hits"]},{type:"fieldref",path:["total_page_views"]},{type:"fieldref",path:["sold_count"]}],filterList:[],fieldUsage:[{path:["device","browser"]},{path:["user_count"]},{path:["percent_of_users"]},{path:["total_visits"]},{path:["total_hits"]},{path:["total_page_views"]},{path:["sold_count"]}],defaultOrderBy:!0,orderBy:[{field:"user_count",dir:"desc"}]}],annotation:{notes:[],blockNotes:[{text:"#(docs) size=large limit=5000\n"}]}}],dependencies:{},references:[{type:"exploreReference",text:"ga_sessions",definition:{type:"table",name:"duckdb:../data/ga_sample.parquet",dialect:"duckdb",tablePath:"../data/ga_sample.parquet",connection:"duckdb",fields:[{type:"number",numberType:"integer",name:"visitorId",fieldUsage:[{path:["visitorId"]}]},{type:"number",numberType:"integer",name:"visitNumber",fieldUsage:[{path:["visitNumber"]}]},{type:"number",numberType:"integer",name:"visitId",fieldUsage:[{path:["visitId"]}]},{type:"number",numberType:"integer",name:"visitStartTime",fieldUsage:[{path:["visitStartTime"]}]},{type:"string",name:"date",fieldUsage:[{path:["date"]}]},{type:"string",name:"fullVisitorId",fieldUsage:[{path:["fullVisitorId"]}]},{type:"string",name:"userId",fieldUsage:[{path:["userId"]}]},{type:"string",name:"clientId",fieldUsage:[{path:["clientId"]}]},{type:"string",name:"channelGrouping",fieldUsage:[{path:["channelGrouping"]}]},{type:"string",name:"socialEngagementType",fieldUsage:[{path:["socialEngagementType"]}]},{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"],sql:'(CASE WHEN group_set=1 THEN\n  count(distinct base."fullVisitorId")\n  END)'},right:{node:"all",e:{node:"field",path:["user_count"]},sql:'MAX((CASE WHEN group_set=0 THEN\n  count(distinct base."fullVisitorId")\n  END)) OVER ()'}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},{type:"number",numberType:"integer",name:"session_count",e:{node:"aggregate",function:"count",e:{node:""}},fieldUsage:[],expressionType:"aggregate",code:"count()"},{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},{type:"number",numberType:"integer",name:"total_hits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","hits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.hits.sum()"},{type:"number",numberType:"integer",name:"total_page_views",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"t2",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"total_product_revenue",e:{node:"aggregate",function:"sum",e:{node:"field",path:["hits","product","productRevenue"]},structPath:["hits","product"]},fieldUsage:[],expressionType:"aggregate",code:"hits.product.productRevenue.sum()"},{type:"number",numberType:"integer",name:"hits_count",e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},fieldUsage:[],expressionType:"aggregate",code:"hits.count()"},{type:"number",numberType:"integer",name:"sold_count",e:{node:"filteredExpr",kids:{e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},filterList:[{node:"filterCondition",code:"hits.product.productQuantity > 0",e:{node:">",kids:{left:{node:"field",path:["hits","product","productQuantity"]},right:{node:"numberLiteral",literal:"0"}}},expressionType:"scalar",fieldUsage:[{path:["hits","product","productQuantity"]}]}]}},fieldUsage:[{path:["hits","product","productQuantity"]}],expressionType:"aggregate",code:"hits.count() { where: hits.product.productQuantity > 0 }"},{type:"record",fields:[{type:"number",numberType:"integer",name:"visits"},{type:"number",numberType:"integer",name:"hits"},{type:"number",numberType:"integer",name:"pageviews"},{type:"number",numberType:"integer",name:"timeOnSite"},{type:"number",numberType:"integer",name:"bounces"},{type:"number",numberType:"integer",name:"transactions"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"newVisits"},{type:"number",numberType:"integer",name:"screenviews"},{type:"number",numberType:"integer",name:"uniqueScreenviews"},{type:"number",numberType:"integer",name:"timeOnScreen"},{type:"number",numberType:"integer",name:"totalTransactionRevenue"},{type:"number",numberType:"integer",name:"sessionQualityDim"}],join:"one",name:"totals",fieldUsage:[{path:["totals"]}]},{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},{type:"record",fields:[{type:"string",name:"continent"},{type:"string",name:"subContinent"},{type:"string",name:"country"},{type:"string",name:"region"},{type:"string",name:"metro"},{type:"string",name:"city"},{type:"string",name:"cityId"},{type:"string",name:"networkDomain"},{type:"string",name:"latitude"},{type:"string",name:"longitude"},{type:"string",name:"networkLocation"}],join:"one",name:"geoNetwork",fieldUsage:[{path:["geoNetwork"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions",fieldUsage:[{path:["customDimensions"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"hitNumber"},{type:"number",numberType:"integer",name:"time"},{type:"number",numberType:"integer",name:"hour"},{type:"number",numberType:"integer",name:"minute"},{type:"boolean",name:"isSecure"},{type:"boolean",name:"isInteraction"},{type:"boolean",name:"isEntrance"},{type:"boolean",name:"isExit"},{type:"string",name:"referer"},{type:"record",fields:[{type:"string",name:"pagePath"},{type:"string",name:"hostname"},{type:"string",name:"pageTitle"},{type:"string",name:"searchKeyword"},{type:"string",name:"searchCategory"},{type:"string",name:"pagePathLevel1"},{type:"string",name:"pagePathLevel2"},{type:"string",name:"pagePathLevel3"},{type:"string",name:"pagePathLevel4"}],join:"one",name:"page"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"transactionTax"},{type:"number",numberType:"integer",name:"transactionShipping"},{type:"string",name:"affiliation"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localTransactionRevenue"},{type:"number",numberType:"integer",name:"localTransactionTax"},{type:"number",numberType:"integer",name:"localTransactionShipping"},{type:"string",name:"transactionCoupon"}],join:"one",name:"transaction"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"string",name:"productName"},{type:"string",name:"productCategory"},{type:"string",name:"productSku"},{type:"number",numberType:"integer",name:"itemQuantity"},{type:"number",numberType:"integer",name:"itemRevenue"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localItemRevenue"}],join:"one",name:"item"},{type:"record",fields:[{type:"string",name:"contentDescription"}],join:"one",name:"contentInfo"},{type:"record",fields:[{type:"string",name:"name"},{type:"string",name:"version"},{type:"string",name:"id"},{type:"string",name:"installerId"},{type:"string",name:"appInstallerId"},{type:"string",name:"appName"},{type:"string",name:"appVersion"},{type:"string",name:"appId"},{type:"string",name:"screenName"},{type:"string",name:"landingScreenName"},{type:"string",name:"exitScreenName"},{type:"string",name:"screenDepth"}],join:"one",name:"appInfo"},{type:"record",fields:[{type:"string",name:"description"},{type:"boolean",name:"isFatal"},{type:"number",numberType:"integer",name:"exceptions"},{type:"number",numberType:"integer",name:"fatalExceptions"}],join:"one",name:"exceptionInfo"},{type:"record",fields:[{type:"string",name:"eventCategory"},{type:"string",name:"eventAction"},{type:"string",name:"eventLabel"},{type:"number",numberType:"integer",name:"eventValue"}],join:"one",name:"eventInfo"},{type:"array",fields:[{type:"string",name:"productSKU"},{type:"string",name:"v2ProductName"},{type:"string",name:"v2ProductCategory"},{type:"string",name:"productVariant"},{type:"string",name:"productBrand"},{type:"number",numberType:"integer",name:"productRevenue"},{type:"number",numberType:"integer",name:"localProductRevenue"},{type:"number",numberType:"integer",name:"productPrice"},{type:"number",numberType:"integer",name:"localProductPrice"},{type:"number",numberType:"integer",name:"productQuantity"},{type:"number",numberType:"integer",name:"productRefundAmount"},{type:"number",numberType:"integer",name:"localProductRefundAmount"},{type:"boolean",name:"isImpression"},{type:"boolean",name:"isClick"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"productListName"},{type:"number",numberType:"integer",name:"productListPosition"},{type:"string",name:"productCouponCode"}],elementTypeDef:{type:"record_element"},join:"many",name:"product"},{type:"array",fields:[{type:"string",name:"promoId"},{type:"string",name:"promoName"},{type:"string",name:"promoCreative"},{type:"string",name:"promoPosition"}],elementTypeDef:{type:"record_element"},join:"many",name:"promotion"},{type:"record",fields:[{type:"boolean",name:"promoIsView"},{type:"boolean",name:"promoIsClick"}],join:"one",name:"promotionActionInfo"},{type:"record",fields:[{type:"number",numberType:"integer",name:"refundAmount"},{type:"number",numberType:"integer",name:"localRefundAmount"}],join:"one",name:"refund"},{type:"record",fields:[{type:"string",name:"action_type"},{type:"number",numberType:"integer",name:"step"},{type:"string",name:"option"}],join:"one",name:"eCommerceAction"},{type:"array",fields:[{type:"string",name:"experimentId"},{type:"string",name:"experimentVariant"}],elementTypeDef:{type:"record_element"},join:"many",name:"experiment"},{type:"record",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],join:"one",name:"publisher"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"customVarName"},{type:"string",name:"customVarValue"}],elementTypeDef:{type:"record_element"},join:"many",name:"customVariables"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"type"},{type:"record",fields:[{type:"string",name:"socialInteractionNetwork"},{type:"string",name:"socialInteractionAction"},{type:"number",numberType:"integer",name:"socialInteractions"},{type:"string",name:"socialInteractionTarget"},{type:"string",name:"socialNetwork"},{type:"number",numberType:"integer",name:"uniqueSocialInteractions"},{type:"string",name:"hasSocialSourceReferral"},{type:"string",name:"socialInteractionNetworkAction"}],join:"one",name:"social"},{type:"record",fields:[{type:"number",numberType:"integer",name:"pageLoadSample"},{type:"number",numberType:"integer",name:"pageLoadTime"},{type:"number",numberType:"integer",name:"pageDownloadTime"},{type:"number",numberType:"integer",name:"redirectionTime"},{type:"number",numberType:"integer",name:"speedMetricsSample"},{type:"number",numberType:"integer",name:"domainLookupTime"},{type:"number",numberType:"integer",name:"serverConnectionTime"},{type:"number",numberType:"integer",name:"serverResponseTime"},{type:"number",numberType:"integer",name:"domLatencyMetricsSample"},{type:"number",numberType:"integer",name:"domInteractiveTime"},{type:"number",numberType:"integer",name:"domContentLoadedTime"},{type:"number",numberType:"integer",name:"userTimingValue"},{type:"number",numberType:"integer",name:"userTimingSample"},{type:"string",name:"userTimingVariable"},{type:"string",name:"userTimingCategory"},{type:"string",name:"userTimingLabel"}],join:"one",name:"latencyTracking"},{type:"record",fields:[{type:"string",name:"sourcePropertyDisplayName"},{type:"string",name:"sourcePropertyTrackingId"}],join:"one",name:"sourcePropertyInfo"},{type:"record",fields:[{type:"string",name:"contentGroup1"},{type:"string",name:"contentGroup2"},{type:"string",name:"contentGroup3"},{type:"string",name:"contentGroup4"},{type:"string",name:"contentGroup5"},{type:"string",name:"previousContentGroup1"},{type:"string",name:"previousContentGroup2"},{type:"string",name:"previousContentGroup3"},{type:"string",name:"previousContentGroup4"},{type:"string",name:"previousContentGroup5"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews1"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews2"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews3"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews4"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews5"}],join:"one",name:"contentGroup"},{type:"string",name:"dataSource"},{type:"array",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],elementTypeDef:{type:"record_element"},join:"many",name:"publisher_infos"}],elementTypeDef:{type:"record_element"},join:"many",name:"hits",fieldUsage:[{path:["hits"]}]}],parameters:{},as:"ga_sessions"}},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},text:"device"},{type:"fieldReference",definition:{type:"string",name:"browser"},text:"browser"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},text:"user_count"},{type:"fieldReference",definition:{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"],sql:'(CASE WHEN group_set=1 THEN\n  count(distinct base."fullVisitorId")\n  END)'},right:{node:"all",e:{node:"field",path:["user_count"]},sql:'MAX((CASE WHEN group_set=0 THEN\n  count(distinct base."fullVisitorId")\n  END)) OVER ()'}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},text:"percent_of_users"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},text:"total_visits"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"total_hits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","hits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.hits.sum()"},text:"total_hits"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"total_page_views",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},text:"total_page_views"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"sold_count",e:{node:"filteredExpr",kids:{e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},filterList:[{node:"filterCondition",code:"hits.product.productQuantity > 0",e:{node:">",kids:{left:{node:"field",path:["hits","product","productQuantity"]},right:{node:"numberLiteral",literal:"0"}}},expressionType:"scalar",fieldUsage:[{path:["hits","product","productQuantity"]}]}]}},fieldUsage:[{path:["hits","product","productQuantity"]}],expressionType:"aggregate",code:"hits.count() { where: hits.product.productQuantity > 0 }"},text:"sold_count"},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},text:"device"}],imports:[]},n.queryResult={lastStageName:"__stage1",malloy:"",sql:'WITH __stage0 AS (\n  SELECT\n    group_set,\n    CASE WHEN group_set=1 THEN\n      base."device"."browser"\n      END as "browser__1",\n    CASE WHEN group_set=1 THEN\n      count(distinct base."fullVisitorId")\n      END as "user_count__1",\n    (CASE WHEN group_set=1 THEN\n      count(distinct base."fullVisitorId")\n      END)*1.0/MAX((CASE WHEN group_set=0 THEN\n      count(distinct base."fullVisitorId")\n      END)) OVER () as "percent_of_users__1",\n    CASE WHEN group_set=1 THEN\n      COALESCE((\n          SELECT SUM(a.val) as value\n          FROM (\n            SELECT UNNEST(list(distinct {key:base."__distinct_key", val: base."totals"."visits"})) a\n          )\n        ),0)\n      END as "total_visits__1",\n    CASE WHEN group_set=1 THEN\n      COALESCE((\n          SELECT SUM(a.val) as value\n          FROM (\n            SELECT UNNEST(list(distinct {key:base."__distinct_key", val: base."totals"."hits"})) a\n          )\n        ),0)\n      END as "total_hits__1",\n    CASE WHEN group_set=1 THEN\n      COALESCE((\n          SELECT SUM(a.val) as value\n          FROM (\n            SELECT UNNEST(list(distinct {key:base."__distinct_key", val: base."totals"."pageviews"})) a\n          )\n        ),0)\n      END as "total_page_views__1",\n    CASE WHEN group_set=1 THEN\n      COUNT(DISTINCT CASE WHEN product_0."productQuantity">0 THEN base."__distinct_key" || \'x\' || hits_0_outer.__row_id END)\n      END as "sold_count__1"\n  FROM (SELECT GEN_RANDOM_UUID() as "__distinct_key", x.*  FROM \'../data/ga_sample.parquet\' as x) as base\n  LEFT JOIN LATERAL (SELECT UNNEST(GENERATE_SERIES(1, length(base."hits"),1)) as __row_id, UNNEST(base."hits"), 1 as ignoreme) as hits_0_outer(__row_id, hits_0,ignoreme) ON  hits_0_outer.ignoreme=1\n  LEFT JOIN LATERAL (SELECT UNNEST(hits_0."product"), 1 as ignoreme) as product_0_outer(product_0,ignoreme) ON product_0_outer.ignoreme=1\n  CROSS JOIN (SELECT UNNEST(GENERATE_SERIES(0,1,1)) as group_set  ) as group_set\n  GROUP BY 1,2\n)\nSELECT\n  "browser__1" as "browser",\n  MAX(CASE WHEN group_set=1 THEN "user_count__1" END) as "user_count",\n  MAX(CASE WHEN group_set=1 THEN "percent_of_users__1" END) as "percent_of_users",\n  MAX(CASE WHEN group_set=1 THEN "total_visits__1" END) as "total_visits",\n  MAX(CASE WHEN group_set=1 THEN "total_hits__1" END) as "total_hits",\n  MAX(CASE WHEN group_set=1 THEN "total_page_views__1" END) as "total_page_views",\n  MAX(CASE WHEN group_set=1 THEN "sold_count__1" END) as "sold_count"\nFROM __stage0\nWHERE group_set NOT IN (0)\nGROUP BY 1\nORDER BY 2 desc NULLS LAST\n',dependenciesToMaterialize:{},structs:[{type:"query_result",name:"__stage1",fields:[{name:"browser",type:"string",resultMetadata:{sourceField:"device.browser",sourceClasses:["device.browser"],referenceId:"85a6fc01-b9be-41a5-9a92-f0d18db1e9e9",fieldKind:"dimension"}},{name:"user_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"user_count",sourceExpression:"count(fullVisitorId)",sourceClasses:["user_count"],referenceId:"11aed15a-2290-4080-8dd4-1744a057b73e",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:2,character:4},end:{line:2,character:38}}}},{name:"percent_of_users",type:"number",resultMetadata:{sourceField:"percent_of_users",sourceExpression:"user_count / all(user_count)",sourceClasses:["percent_of_users"],referenceId:"fac9f785-1ca8-407d-a865-76db9bb89d44",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:3,character:4},end:{line:4,character:52}}},annotation:{inherits:{notes:[{text:"# percent\n",at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:3,character:4},end:{line:3,character:14}}}}]}}},{name:"total_visits",numberType:"integer",type:"number",resultMetadata:{sourceField:"total_visits",sourceExpression:"totals.visits.sum()",sourceClasses:["total_visits"],referenceId:"e2c8d71c-5a05-4fc7-b5ba-a415e3237662",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:6,character:4},end:{line:6,character:39}}}},{name:"total_hits",numberType:"integer",type:"number",resultMetadata:{sourceField:"total_hits",sourceExpression:"totals.hits.sum()",sourceClasses:["total_hits"],referenceId:"8121cb17-0195-49dd-b73f-3268d93c9247",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:7,character:4},end:{line:7,character:35}}}},{name:"total_page_views",numberType:"integer",type:"number",resultMetadata:{sourceField:"total_page_views",sourceExpression:"totals.pageviews.sum()",sourceClasses:["total_page_views"],referenceId:"67780055-e456-4a3e-b829-1d1bdd81b765",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:8,character:4},end:{line:8,character:46}}}},{name:"sold_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"sold_count",sourceExpression:"hits.count() { where: hits.product.productQuantity > 0 }",sourceClasses:["sold_count"],referenceId:"38b90d32-db5e-45af-bbd0-3fb18127e440",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:12,character:4},end:{line:12,character:74}}}}],dialect:"duckdb",primaryKey:"browser",connection:"duckdb",resultMetadata:{sourceField:"ignoreme",filterList:[],sourceClasses:["ignoreme"],fieldKind:"struct",orderBy:[{field:"user_count",dir:"desc"}],drillable:!0}}],sourceExplore:"ga_sessions",sourceArguments:{},connectionName:"duckdb",annotation:{notes:[],blockNotes:[{text:"#(docs) size=large limit=5000\n",at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:0,character:0},end:{line:0,character:30}}}}]},result:[{browser:"Chrome",user_count:1689,percent_of_users:.7365896205843873,total_visits:1900,total_hits:10896,total_page_views:8956,sold_count:642},{browser:"Safari",user_count:364,percent_of_users:.1587440034888792,total_visits:397,total_hits:1260,total_page_views:1137,sold_count:24},{browser:"Firefox",user_count:95,percent_of_users:.04143044047099869,total_visits:101,total_hits:390,total_page_views:343,sold_count:10},{browser:"Internet Explorer",user_count:50,percent_of_users:.021805494984736152,total_visits:54,total_hits:107,total_page_views:102,sold_count:1},{browser:"Edge",user_count:23,percent_of_users:.01003052769297863,total_visits:23,total_hits:63,total_page_views:55,sold_count:0},{browser:"Opera Mini",user_count:21,percent_of_users:.009158307893589184,total_visits:21,total_hits:29,total_page_views:28,sold_count:0},{browser:"Android Webview",user_count:17,percent_of_users:.007413868294810292,total_visits:19,total_hits:363,total_page_views:211,sold_count:1},{browser:"Opera",user_count:11,percent_of_users:.004797208896641954,total_visits:16,total_hits:55,total_page_views:49,sold_count:1},{browser:"Safari (in-app)",user_count:8,percent_of_users:.0034888791975577847,total_visits:10,total_hits:33,total_page_views:29,sold_count:1},{browser:"UC Browser",user_count:6,percent_of_users:.0026166593981683385,total_visits:6,total_hits:22,total_page_views:14,sold_count:0},{browser:"Nokia Browser",user_count:2,percent_of_users:.0008722197993894462,total_visits:2,total_hits:3,total_page_views:3,sold_count:0},{browser:"Coc Coc",user_count:2,percent_of_users:.0008722197993894462,total_visits:2,total_hits:2,total_page_views:2,sold_count:0},{browser:"YaBrowser",user_count:2,percent_of_users:.0008722197993894462,total_visits:2,total_hits:6,total_page_views:6,sold_count:0},{browser:"Android Browser",user_count:2,percent_of_users:.0008722197993894462,total_visits:2,total_hits:3,total_page_views:3,sold_count:0},{browser:"Mozilla Compatible Agent",user_count:1,percent_of_users:.0004361098996947231,total_visits:1,total_hits:1,total_page_views:1,sold_count:0}],totalRows:15},e.appendChild(n)})();</script>
      </div>
    </div>
    <div class="result-middle" data-result-kind="json" >
      <div class="result-inner">
        <pre><pre class="language-json" style="background-color: #FBFBFB"><span class="line"><span style="color: #000000">[</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Chrome&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1689</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.7365896205843873</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1900</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10896</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8956</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">642</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Safari&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">364</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.1587440034888792</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">397</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1260</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1137</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">24</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Firefox&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">95</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.04143044047099869</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">101</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">390</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">343</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Internet Explorer&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">50</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.021805494984736152</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">54</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">107</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">102</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Edge&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">23</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.01003052769297863</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">23</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">63</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">55</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Opera Mini&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">21</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.009158307893589184</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">21</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">29</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">28</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Android Webview&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">17</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.007413868294810292</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">19</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">363</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">211</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Opera&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">11</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.004797208896641954</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">16</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">55</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">49</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Safari (in-app)&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0034888791975577847</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">33</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">29</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;UC Browser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0026166593981683385</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">22</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">14</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Nokia Browser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0008722197993894462</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Coc Coc&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0008722197993894462</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;YaBrowser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0008722197993894462</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Android Browser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0008722197993894462</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Mozilla Compatible Agent&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0004361098996947231</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">]</span></span></pre></pre>
      </div>
    </div>
    <div class="result-middle" data-result-kind="sql" >
      <div class="result-inner">
        <pre><pre class="language-sql" style="background-color: #FBFBFB"><span class="line"><span style="color: #0000FF">WITH</span><span style="color: #000000"> __stage0 </span><span style="color: #0000FF">AS</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">SELECT</span></span>
<span class="line"><span style="color: #000000">    group_set,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      base.</span><span style="color: #A31515">&quot;device&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;browser&quot;</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;browser__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    (</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">)*</span><span style="color: #098658">1</span><span style="color: #000000">.</span><span style="color: #098658">0</span><span style="color: #000000">/</span><span style="color: #795E26">MAX</span><span style="color: #000000">((</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">0</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">)) </span><span style="color: #0000FF">OVER</span><span style="color: #000000"> () </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">((</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> </span><span style="color: #795E26">SUM</span><span style="color: #000000">(a.val) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">value</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(list(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> {</span><span style="color: #0000FF">key</span><span style="color: #000000">:base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, val: base.</span><span style="color: #A31515">&quot;totals&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;visits&quot;</span><span style="color: #000000">})) a</span></span>
<span class="line"><span style="color: #000000">          )</span></span>
<span class="line"><span style="color: #000000">        ),</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">((</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> </span><span style="color: #795E26">SUM</span><span style="color: #000000">(a.val) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">value</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(list(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> {</span><span style="color: #0000FF">key</span><span style="color: #000000">:base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, val: base.</span><span style="color: #A31515">&quot;totals&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;hits&quot;</span><span style="color: #000000">})) a</span></span>
<span class="line"><span style="color: #000000">          )</span></span>
<span class="line"><span style="color: #000000">        ),</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_hits__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">((</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> </span><span style="color: #795E26">SUM</span><span style="color: #000000">(a.val) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">value</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(list(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> {</span><span style="color: #0000FF">key</span><span style="color: #000000">:base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, val: base.</span><span style="color: #A31515">&quot;totals&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;pageviews&quot;</span><span style="color: #000000">})) a</span></span>
<span class="line"><span style="color: #000000">          )</span></span>
<span class="line"><span style="color: #000000">        ),</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_page_views__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COUNT</span><span style="color: #000000">(</span><span style="color: #0000FF">DISTINCT</span><span style="color: #000000"> </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> product_0.</span><span style="color: #A31515">&quot;productQuantity&quot;</span><span style="color: #000000">&gt;</span><span style="color: #098658">0</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000"> || </span><span style="color: #A31515">&#39;x&#39;</span><span style="color: #000000"> || hits_0_outer.__row_id </span><span style="color: #0000FF">END</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;sold_count__1&quot;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> GEN_RANDOM_UUID() </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, x.*  </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;../data/ga_sample.parquet&#39;</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> x) </span><span style="color: #0000FF">as</span><span style="color: #000000"> base</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">LEFT JOIN</span><span style="color: #000000"> LATERAL (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(GENERATE_SERIES(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #0000FF">length</span><span style="color: #000000">(base.</span><span style="color: #A31515">&quot;hits&quot;</span><span style="color: #000000">),</span><span style="color: #098658">1</span><span style="color: #000000">)) </span><span style="color: #0000FF">as</span><span style="color: #000000"> __row_id, UNNEST(base.</span><span style="color: #A31515">&quot;hits&quot;</span><span style="color: #000000">), </span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> ignoreme) </span><span style="color: #0000FF">as</span><span style="color: #000000"> hits_0_outer(__row_id, hits_0,ignoreme) </span><span style="color: #0000FF">ON</span><span style="color: #000000">  hits_0_outer.ignoreme=</span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">LEFT JOIN</span><span style="color: #000000"> LATERAL (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(hits_0.</span><span style="color: #A31515">&quot;product&quot;</span><span style="color: #000000">), </span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> ignoreme) </span><span style="color: #0000FF">as</span><span style="color: #000000"> product_0_outer(product_0,ignoreme) </span><span style="color: #0000FF">ON</span><span style="color: #000000"> product_0_outer.ignoreme=</span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">CROSS</span><span style="color: #000000"> </span><span style="color: #0000FF">JOIN</span><span style="color: #000000"> (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(GENERATE_SERIES(</span><span style="color: #098658">0</span><span style="color: #000000">,</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">1</span><span style="color: #000000">)) </span><span style="color: #0000FF">as</span><span style="color: #000000"> group_set  ) </span><span style="color: #0000FF">as</span><span style="color: #000000"> group_set</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">GROUP BY</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">SELECT</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&quot;browser__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;browser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_hits__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_hits&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_page_views__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_page_views&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;sold_count__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;sold_count&quot;</span></span>
<span class="line"><span style="color: #0000FF">FROM</span><span style="color: #000000"> __stage0</span></span>
<span class="line"><span style="color: #0000FF">WHERE</span><span style="color: #000000"> group_set </span><span style="color: #0000FF">NOT</span><span style="color: #000000"> </span><span style="color: #0000FF">IN</span><span style="color: #000000"> (</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">GROUP BY</span><span style="color: #000000"> </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #0000FF">ORDER BY</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">desc</span><span style="color: #000000"> NULLS </span><span style="color: #0000FF">LAST</span></span>
<span class="line"></span></pre></pre>
      </div>
    </div>
  </div></div>
      <h2>
        <a id="with-nested-results" class="header-link anchor" href="#with-nested-results">
          With Nested Results
        </a>
      </h2>
    <div class="code-wrapper"><a href="https://github.dev/malloydata/malloydata.github.io/blob/main/src/documentation/patterns/reading_nested.malloynb#C8" target="_blank" class="open_notebook"><img src="/img/open_notebook.svg" alt="document"/></a><pre class="language-malloy" style="background-color: #FBFBFB"><span class="line"><span style="color: #AF00DB">run</span><span style="color: #000000">: </span><span style="color: #001080">ga_sessions</span><span style="color: #000000"> -&gt; {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">group_by</span><span style="color: #000000">: </span><span style="color: #001080">device</span><span style="color: #000000">.</span><span style="color: #001080">browser</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">aggregate</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">user_count</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">percent_of_users</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_visits</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_hits</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">total_page_views</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">sold_count</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">nest</span><span style="color: #000000">: </span><span style="color: #001080">by_source</span><span style="color: #000000"> </span><span style="color: #AF00DB">is</span><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">where</span><span style="color: #000000">: </span><span style="color: #001080">trafficSource</span><span style="color: #000000">.</span><span style="color: #001080">`source`</span><span style="color: #000000"> != </span><span style="color: #A31515">&#39;(direct)&#39;</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">group_by</span><span style="color: #000000">: </span><span style="color: #001080">trafficSource</span><span style="color: #000000">.</span><span style="color: #001080">`source`</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">aggregate</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">user_count</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">percent_of_users</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">hits_count</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">total_visits</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">session_count</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">limit</span><span style="color: #000000">: </span><span style="color: #098658">10</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">}</span></span></pre><div class="result-outer large">
    <div class="result-controls-bar">
      <span class="result-label">QUERY RESULTS</span>
      <div class="result-controls">
        <button class="result-control" selected data-result-kind="html">HTML</button>
        <button class="result-control"  data-result-kind="json">JSON</button>
        <button class="result-control"  data-result-kind="sql">SQL</button>
      </div>
    </div>
    <div class="result-middle" data-result-kind="html" selected>
      <div class="result-inner" id="32b3f041-2148-43ce-ad30-ea314bc96c34">
        <script>(()=>{var e=document.getElementById("32b3f041-2148-43ce-ad30-ea314bc96c34"),n=document.createElement("malloy-render");n.modelDef={name:"",exports:["ga_sessions"],contents:{ga_sessions:{type:"table",name:"duckdb:../data/ga_sample.parquet",dialect:"duckdb",tablePath:"../data/ga_sample.parquet",connection:"duckdb",fields:[{type:"number",numberType:"integer",name:"visitorId",fieldUsage:[{path:["visitorId"]}]},{type:"number",numberType:"integer",name:"visitNumber",fieldUsage:[{path:["visitNumber"]}]},{type:"number",numberType:"integer",name:"visitId",fieldUsage:[{path:["visitId"]}]},{type:"number",numberType:"integer",name:"visitStartTime",fieldUsage:[{path:["visitStartTime"]}]},{type:"string",name:"date",fieldUsage:[{path:["date"]}]},{type:"string",name:"fullVisitorId",fieldUsage:[{path:["fullVisitorId"]}]},{type:"string",name:"userId",fieldUsage:[{path:["userId"]}]},{type:"string",name:"clientId",fieldUsage:[{path:["clientId"]}]},{type:"string",name:"channelGrouping",fieldUsage:[{path:["channelGrouping"]}]},{type:"string",name:"socialEngagementType",fieldUsage:[{path:["socialEngagementType"]}]},{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"],sql:'(CASE WHEN group_set=2 THEN\n  count(distinct base."fullVisitorId")\n  END)'},right:{node:"all",e:{node:"field",path:["user_count"]},sql:'MAX((CASE WHEN group_set=1 THEN\n  count(distinct base."fullVisitorId")\n  END)) OVER (PARTITION BY CASE WHEN group_set IN (1,2) THEN\n  base."device"."browser"\n  END)'}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},{type:"number",numberType:"integer",name:"session_count",e:{node:"aggregate",function:"count",e:{node:""}},fieldUsage:[],expressionType:"aggregate",code:"count()"},{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},{type:"number",numberType:"integer",name:"total_hits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","hits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.hits.sum()"},{type:"number",numberType:"integer",name:"total_page_views",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"t2",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"total_product_revenue",e:{node:"aggregate",function:"sum",e:{node:"field",path:["hits","product","productRevenue"]},structPath:["hits","product"]},fieldUsage:[],expressionType:"aggregate",code:"hits.product.productRevenue.sum()"},{type:"number",numberType:"integer",name:"hits_count",e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},fieldUsage:[],expressionType:"aggregate",code:"hits.count()"},{type:"number",numberType:"integer",name:"sold_count",e:{node:"filteredExpr",kids:{e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"],sql:"CASE WHEN group_set=1 THEN\n  COUNT(DISTINCT base.\"__distinct_key\" || 'x' || hits_0_outer.__row_id)\n  END"},filterList:[{node:"filterCondition",code:"hits.product.productQuantity > 0",e:{node:">",kids:{left:{node:"field",path:["hits","product","productQuantity"],sql:'product_0."productQuantity"'},right:{node:"numberLiteral",literal:"0",sql:"0"}}},expressionType:"scalar",fieldUsage:[{path:["hits","product","productQuantity"]}],sql:'(product_0."productQuantity">0)'}]}},fieldUsage:[{path:["hits","product","productQuantity"]}],expressionType:"aggregate",code:"hits.count() { where: hits.product.productQuantity > 0 }"},{type:"record",fields:[{type:"number",numberType:"integer",name:"visits"},{type:"number",numberType:"integer",name:"hits"},{type:"number",numberType:"integer",name:"pageviews"},{type:"number",numberType:"integer",name:"timeOnSite"},{type:"number",numberType:"integer",name:"bounces"},{type:"number",numberType:"integer",name:"transactions"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"newVisits"},{type:"number",numberType:"integer",name:"screenviews"},{type:"number",numberType:"integer",name:"uniqueScreenviews"},{type:"number",numberType:"integer",name:"timeOnScreen"},{type:"number",numberType:"integer",name:"totalTransactionRevenue"},{type:"number",numberType:"integer",name:"sessionQualityDim"}],join:"one",name:"totals",fieldUsage:[{path:["totals"]}]},{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},{type:"record",fields:[{type:"string",name:"continent"},{type:"string",name:"subContinent"},{type:"string",name:"country"},{type:"string",name:"region"},{type:"string",name:"metro"},{type:"string",name:"city"},{type:"string",name:"cityId"},{type:"string",name:"networkDomain"},{type:"string",name:"latitude"},{type:"string",name:"longitude"},{type:"string",name:"networkLocation"}],join:"one",name:"geoNetwork",fieldUsage:[{path:["geoNetwork"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions",fieldUsage:[{path:["customDimensions"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"hitNumber"},{type:"number",numberType:"integer",name:"time"},{type:"number",numberType:"integer",name:"hour"},{type:"number",numberType:"integer",name:"minute"},{type:"boolean",name:"isSecure"},{type:"boolean",name:"isInteraction"},{type:"boolean",name:"isEntrance"},{type:"boolean",name:"isExit"},{type:"string",name:"referer"},{type:"record",fields:[{type:"string",name:"pagePath"},{type:"string",name:"hostname"},{type:"string",name:"pageTitle"},{type:"string",name:"searchKeyword"},{type:"string",name:"searchCategory"},{type:"string",name:"pagePathLevel1"},{type:"string",name:"pagePathLevel2"},{type:"string",name:"pagePathLevel3"},{type:"string",name:"pagePathLevel4"}],join:"one",name:"page"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"transactionTax"},{type:"number",numberType:"integer",name:"transactionShipping"},{type:"string",name:"affiliation"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localTransactionRevenue"},{type:"number",numberType:"integer",name:"localTransactionTax"},{type:"number",numberType:"integer",name:"localTransactionShipping"},{type:"string",name:"transactionCoupon"}],join:"one",name:"transaction"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"string",name:"productName"},{type:"string",name:"productCategory"},{type:"string",name:"productSku"},{type:"number",numberType:"integer",name:"itemQuantity"},{type:"number",numberType:"integer",name:"itemRevenue"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localItemRevenue"}],join:"one",name:"item"},{type:"record",fields:[{type:"string",name:"contentDescription"}],join:"one",name:"contentInfo"},{type:"record",fields:[{type:"string",name:"name"},{type:"string",name:"version"},{type:"string",name:"id"},{type:"string",name:"installerId"},{type:"string",name:"appInstallerId"},{type:"string",name:"appName"},{type:"string",name:"appVersion"},{type:"string",name:"appId"},{type:"string",name:"screenName"},{type:"string",name:"landingScreenName"},{type:"string",name:"exitScreenName"},{type:"string",name:"screenDepth"}],join:"one",name:"appInfo"},{type:"record",fields:[{type:"string",name:"description"},{type:"boolean",name:"isFatal"},{type:"number",numberType:"integer",name:"exceptions"},{type:"number",numberType:"integer",name:"fatalExceptions"}],join:"one",name:"exceptionInfo"},{type:"record",fields:[{type:"string",name:"eventCategory"},{type:"string",name:"eventAction"},{type:"string",name:"eventLabel"},{type:"number",numberType:"integer",name:"eventValue"}],join:"one",name:"eventInfo"},{type:"array",fields:[{type:"string",name:"productSKU"},{type:"string",name:"v2ProductName"},{type:"string",name:"v2ProductCategory"},{type:"string",name:"productVariant"},{type:"string",name:"productBrand"},{type:"number",numberType:"integer",name:"productRevenue"},{type:"number",numberType:"integer",name:"localProductRevenue"},{type:"number",numberType:"integer",name:"productPrice"},{type:"number",numberType:"integer",name:"localProductPrice"},{type:"number",numberType:"integer",name:"productQuantity"},{type:"number",numberType:"integer",name:"productRefundAmount"},{type:"number",numberType:"integer",name:"localProductRefundAmount"},{type:"boolean",name:"isImpression"},{type:"boolean",name:"isClick"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"productListName"},{type:"number",numberType:"integer",name:"productListPosition"},{type:"string",name:"productCouponCode"}],elementTypeDef:{type:"record_element"},join:"many",name:"product"},{type:"array",fields:[{type:"string",name:"promoId"},{type:"string",name:"promoName"},{type:"string",name:"promoCreative"},{type:"string",name:"promoPosition"}],elementTypeDef:{type:"record_element"},join:"many",name:"promotion"},{type:"record",fields:[{type:"boolean",name:"promoIsView"},{type:"boolean",name:"promoIsClick"}],join:"one",name:"promotionActionInfo"},{type:"record",fields:[{type:"number",numberType:"integer",name:"refundAmount"},{type:"number",numberType:"integer",name:"localRefundAmount"}],join:"one",name:"refund"},{type:"record",fields:[{type:"string",name:"action_type"},{type:"number",numberType:"integer",name:"step"},{type:"string",name:"option"}],join:"one",name:"eCommerceAction"},{type:"array",fields:[{type:"string",name:"experimentId"},{type:"string",name:"experimentVariant"}],elementTypeDef:{type:"record_element"},join:"many",name:"experiment"},{type:"record",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],join:"one",name:"publisher"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"customVarName"},{type:"string",name:"customVarValue"}],elementTypeDef:{type:"record_element"},join:"many",name:"customVariables"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"type"},{type:"record",fields:[{type:"string",name:"socialInteractionNetwork"},{type:"string",name:"socialInteractionAction"},{type:"number",numberType:"integer",name:"socialInteractions"},{type:"string",name:"socialInteractionTarget"},{type:"string",name:"socialNetwork"},{type:"number",numberType:"integer",name:"uniqueSocialInteractions"},{type:"string",name:"hasSocialSourceReferral"},{type:"string",name:"socialInteractionNetworkAction"}],join:"one",name:"social"},{type:"record",fields:[{type:"number",numberType:"integer",name:"pageLoadSample"},{type:"number",numberType:"integer",name:"pageLoadTime"},{type:"number",numberType:"integer",name:"pageDownloadTime"},{type:"number",numberType:"integer",name:"redirectionTime"},{type:"number",numberType:"integer",name:"speedMetricsSample"},{type:"number",numberType:"integer",name:"domainLookupTime"},{type:"number",numberType:"integer",name:"serverConnectionTime"},{type:"number",numberType:"integer",name:"serverResponseTime"},{type:"number",numberType:"integer",name:"domLatencyMetricsSample"},{type:"number",numberType:"integer",name:"domInteractiveTime"},{type:"number",numberType:"integer",name:"domContentLoadedTime"},{type:"number",numberType:"integer",name:"userTimingValue"},{type:"number",numberType:"integer",name:"userTimingSample"},{type:"string",name:"userTimingVariable"},{type:"string",name:"userTimingCategory"},{type:"string",name:"userTimingLabel"}],join:"one",name:"latencyTracking"},{type:"record",fields:[{type:"string",name:"sourcePropertyDisplayName"},{type:"string",name:"sourcePropertyTrackingId"}],join:"one",name:"sourcePropertyInfo"},{type:"record",fields:[{type:"string",name:"contentGroup1"},{type:"string",name:"contentGroup2"},{type:"string",name:"contentGroup3"},{type:"string",name:"contentGroup4"},{type:"string",name:"contentGroup5"},{type:"string",name:"previousContentGroup1"},{type:"string",name:"previousContentGroup2"},{type:"string",name:"previousContentGroup3"},{type:"string",name:"previousContentGroup4"},{type:"string",name:"previousContentGroup5"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews1"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews2"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews3"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews4"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews5"}],join:"one",name:"contentGroup"},{type:"string",name:"dataSource"},{type:"array",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],elementTypeDef:{type:"record_element"},join:"many",name:"publisher_infos"}],elementTypeDef:{type:"record_element"},join:"many",name:"hits",fieldUsage:[{path:["hits"]}]}],parameters:{},as:"ga_sessions"}},queryList:[{type:"query",structRef:"ga_sessions",sourceArguments:{},pipeline:[{type:"reduce",queryFields:[{type:"fieldref",path:["device","browser"]},{type:"fieldref",path:["user_count"]},{type:"fieldref",path:["percent_of_users"],annotation:{inherits:{notes:[{text:"# percent\n"}]}}},{type:"fieldref",path:["total_visits"]},{type:"fieldref",path:["total_hits"]},{type:"fieldref",path:["total_page_views"]},{type:"fieldref",path:["sold_count"]},{type:"turtle",name:"by_source",pipeline:[{type:"reduce",queryFields:[{type:"fieldref",path:["trafficSource","source"],drillView:"by_source"},{type:"fieldref",path:["user_count"],drillView:"by_source"},{type:"fieldref",path:["percent_of_users"],annotation:{inherits:{notes:[{text:"# percent\n"}]}},drillView:"by_source"},{type:"fieldref",path:["hits_count"],drillView:"by_source"},{type:"fieldref",path:["total_visits"],drillView:"by_source"},{type:"fieldref",path:["session_count"],drillView:"by_source"}],limit:10,filterList:[{node:"filterCondition",code:"trafficSource.`source` != '(direct)'",e:{node:"!=",kids:{left:{node:"field",path:["trafficSource","source"]},right:{node:"stringLiteral",literal:"(direct)"}}},expressionType:"scalar",fieldUsage:[{path:["trafficSource","source"]}],drillView:"by_source"}],fieldUsage:[{path:["trafficSource","source"]},{path:["trafficSource","source"]},{path:["user_count"]},{path:["percent_of_users"]},{path:["hits_count"]},{path:["total_visits"]},{path:["session_count"]}],defaultOrderBy:!0,orderBy:[{field:"user_count",dir:"desc"}]}],annotation:{},fieldUsage:[{path:["trafficSource","source"]},{path:["trafficSource","source"]},{path:["user_count"]},{path:["percent_of_users"]},{path:["hits_count"]},{path:["total_visits"]},{path:["session_count"]}]}],filterList:[],fieldUsage:[{path:["device","browser"]},{path:["user_count"]},{path:["percent_of_users"]},{path:["total_visits"]},{path:["total_hits"]},{path:["total_page_views"]},{path:["sold_count"]},{path:["trafficSource","source"]},{path:["trafficSource","source"]},{path:["user_count"]},{path:["percent_of_users"]},{path:["hits_count"]},{path:["total_visits"]},{path:["session_count"]}],defaultOrderBy:!0,orderBy:[{field:"user_count",dir:"desc"}]}],annotation:{notes:[],blockNotes:[{text:"#(docs) size=large limit=5000\n"}]}}],dependencies:{},references:[{type:"exploreReference",text:"ga_sessions",definition:{type:"table",name:"duckdb:../data/ga_sample.parquet",dialect:"duckdb",tablePath:"../data/ga_sample.parquet",connection:"duckdb",fields:[{type:"number",numberType:"integer",name:"visitorId",fieldUsage:[{path:["visitorId"]}]},{type:"number",numberType:"integer",name:"visitNumber",fieldUsage:[{path:["visitNumber"]}]},{type:"number",numberType:"integer",name:"visitId",fieldUsage:[{path:["visitId"]}]},{type:"number",numberType:"integer",name:"visitStartTime",fieldUsage:[{path:["visitStartTime"]}]},{type:"string",name:"date",fieldUsage:[{path:["date"]}]},{type:"string",name:"fullVisitorId",fieldUsage:[{path:["fullVisitorId"]}]},{type:"string",name:"userId",fieldUsage:[{path:["userId"]}]},{type:"string",name:"clientId",fieldUsage:[{path:["clientId"]}]},{type:"string",name:"channelGrouping",fieldUsage:[{path:["channelGrouping"]}]},{type:"string",name:"socialEngagementType",fieldUsage:[{path:["socialEngagementType"]}]},{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"],sql:'(CASE WHEN group_set=1 THEN\n  count(distinct base."fullVisitorId")\n  END)'},right:{node:"all",e:{node:"field",path:["user_count"]},sql:'MAX((CASE WHEN group_set=0 THEN\n  count(distinct base."fullVisitorId")\n  END)) OVER ()'}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},{type:"number",numberType:"integer",name:"session_count",e:{node:"aggregate",function:"count",e:{node:""}},fieldUsage:[],expressionType:"aggregate",code:"count()"},{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},{type:"number",numberType:"integer",name:"total_hits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","hits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.hits.sum()"},{type:"number",numberType:"integer",name:"total_page_views",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"t2",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},{type:"number",numberType:"integer",name:"total_product_revenue",e:{node:"aggregate",function:"sum",e:{node:"field",path:["hits","product","productRevenue"]},structPath:["hits","product"]},fieldUsage:[],expressionType:"aggregate",code:"hits.product.productRevenue.sum()"},{type:"number",numberType:"integer",name:"hits_count",e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},fieldUsage:[],expressionType:"aggregate",code:"hits.count()"},{type:"number",numberType:"integer",name:"sold_count",e:{node:"filteredExpr",kids:{e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"],sql:"CASE WHEN group_set=1 THEN\n  COUNT(DISTINCT base.\"__distinct_key\" || 'x' || hits_0_outer.__row_id)\n  END"},filterList:[{node:"filterCondition",code:"hits.product.productQuantity > 0",e:{node:">",kids:{left:{node:"field",path:["hits","product","productQuantity"],sql:'product_0."productQuantity"'},right:{node:"numberLiteral",literal:"0",sql:"0"}}},expressionType:"scalar",fieldUsage:[{path:["hits","product","productQuantity"]}],sql:'(product_0."productQuantity">0)'}]}},fieldUsage:[{path:["hits","product","productQuantity"]}],expressionType:"aggregate",code:"hits.count() { where: hits.product.productQuantity > 0 }"},{type:"record",fields:[{type:"number",numberType:"integer",name:"visits"},{type:"number",numberType:"integer",name:"hits"},{type:"number",numberType:"integer",name:"pageviews"},{type:"number",numberType:"integer",name:"timeOnSite"},{type:"number",numberType:"integer",name:"bounces"},{type:"number",numberType:"integer",name:"transactions"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"newVisits"},{type:"number",numberType:"integer",name:"screenviews"},{type:"number",numberType:"integer",name:"uniqueScreenviews"},{type:"number",numberType:"integer",name:"timeOnScreen"},{type:"number",numberType:"integer",name:"totalTransactionRevenue"},{type:"number",numberType:"integer",name:"sessionQualityDim"}],join:"one",name:"totals",fieldUsage:[{path:["totals"]}]},{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},{type:"record",fields:[{type:"string",name:"continent"},{type:"string",name:"subContinent"},{type:"string",name:"country"},{type:"string",name:"region"},{type:"string",name:"metro"},{type:"string",name:"city"},{type:"string",name:"cityId"},{type:"string",name:"networkDomain"},{type:"string",name:"latitude"},{type:"string",name:"longitude"},{type:"string",name:"networkLocation"}],join:"one",name:"geoNetwork",fieldUsage:[{path:["geoNetwork"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions",fieldUsage:[{path:["customDimensions"]}]},{type:"array",fields:[{type:"number",numberType:"integer",name:"hitNumber"},{type:"number",numberType:"integer",name:"time"},{type:"number",numberType:"integer",name:"hour"},{type:"number",numberType:"integer",name:"minute"},{type:"boolean",name:"isSecure"},{type:"boolean",name:"isInteraction"},{type:"boolean",name:"isEntrance"},{type:"boolean",name:"isExit"},{type:"string",name:"referer"},{type:"record",fields:[{type:"string",name:"pagePath"},{type:"string",name:"hostname"},{type:"string",name:"pageTitle"},{type:"string",name:"searchKeyword"},{type:"string",name:"searchCategory"},{type:"string",name:"pagePathLevel1"},{type:"string",name:"pagePathLevel2"},{type:"string",name:"pagePathLevel3"},{type:"string",name:"pagePathLevel4"}],join:"one",name:"page"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"number",numberType:"integer",name:"transactionRevenue"},{type:"number",numberType:"integer",name:"transactionTax"},{type:"number",numberType:"integer",name:"transactionShipping"},{type:"string",name:"affiliation"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localTransactionRevenue"},{type:"number",numberType:"integer",name:"localTransactionTax"},{type:"number",numberType:"integer",name:"localTransactionShipping"},{type:"string",name:"transactionCoupon"}],join:"one",name:"transaction"},{type:"record",fields:[{type:"string",name:"transactionId"},{type:"string",name:"productName"},{type:"string",name:"productCategory"},{type:"string",name:"productSku"},{type:"number",numberType:"integer",name:"itemQuantity"},{type:"number",numberType:"integer",name:"itemRevenue"},{type:"string",name:"currencyCode"},{type:"number",numberType:"integer",name:"localItemRevenue"}],join:"one",name:"item"},{type:"record",fields:[{type:"string",name:"contentDescription"}],join:"one",name:"contentInfo"},{type:"record",fields:[{type:"string",name:"name"},{type:"string",name:"version"},{type:"string",name:"id"},{type:"string",name:"installerId"},{type:"string",name:"appInstallerId"},{type:"string",name:"appName"},{type:"string",name:"appVersion"},{type:"string",name:"appId"},{type:"string",name:"screenName"},{type:"string",name:"landingScreenName"},{type:"string",name:"exitScreenName"},{type:"string",name:"screenDepth"}],join:"one",name:"appInfo"},{type:"record",fields:[{type:"string",name:"description"},{type:"boolean",name:"isFatal"},{type:"number",numberType:"integer",name:"exceptions"},{type:"number",numberType:"integer",name:"fatalExceptions"}],join:"one",name:"exceptionInfo"},{type:"record",fields:[{type:"string",name:"eventCategory"},{type:"string",name:"eventAction"},{type:"string",name:"eventLabel"},{type:"number",numberType:"integer",name:"eventValue"}],join:"one",name:"eventInfo"},{type:"array",fields:[{type:"string",name:"productSKU"},{type:"string",name:"v2ProductName"},{type:"string",name:"v2ProductCategory"},{type:"string",name:"productVariant"},{type:"string",name:"productBrand"},{type:"number",numberType:"integer",name:"productRevenue"},{type:"number",numberType:"integer",name:"localProductRevenue"},{type:"number",numberType:"integer",name:"productPrice"},{type:"number",numberType:"integer",name:"localProductPrice"},{type:"number",numberType:"integer",name:"productQuantity"},{type:"number",numberType:"integer",name:"productRefundAmount"},{type:"number",numberType:"integer",name:"localProductRefundAmount"},{type:"boolean",name:"isImpression"},{type:"boolean",name:"isClick"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"productListName"},{type:"number",numberType:"integer",name:"productListPosition"},{type:"string",name:"productCouponCode"}],elementTypeDef:{type:"record_element"},join:"many",name:"product"},{type:"array",fields:[{type:"string",name:"promoId"},{type:"string",name:"promoName"},{type:"string",name:"promoCreative"},{type:"string",name:"promoPosition"}],elementTypeDef:{type:"record_element"},join:"many",name:"promotion"},{type:"record",fields:[{type:"boolean",name:"promoIsView"},{type:"boolean",name:"promoIsClick"}],join:"one",name:"promotionActionInfo"},{type:"record",fields:[{type:"number",numberType:"integer",name:"refundAmount"},{type:"number",numberType:"integer",name:"localRefundAmount"}],join:"one",name:"refund"},{type:"record",fields:[{type:"string",name:"action_type"},{type:"number",numberType:"integer",name:"step"},{type:"string",name:"option"}],join:"one",name:"eCommerceAction"},{type:"array",fields:[{type:"string",name:"experimentId"},{type:"string",name:"experimentVariant"}],elementTypeDef:{type:"record_element"},join:"many",name:"experiment"},{type:"record",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],join:"one",name:"publisher"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"customVarName"},{type:"string",name:"customVarValue"}],elementTypeDef:{type:"record_element"},join:"many",name:"customVariables"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"string",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customDimensions"},{type:"array",fields:[{type:"number",numberType:"integer",name:"index"},{type:"number",numberType:"integer",name:"value"}],elementTypeDef:{type:"record_element"},join:"many",name:"customMetrics"},{type:"string",name:"type"},{type:"record",fields:[{type:"string",name:"socialInteractionNetwork"},{type:"string",name:"socialInteractionAction"},{type:"number",numberType:"integer",name:"socialInteractions"},{type:"string",name:"socialInteractionTarget"},{type:"string",name:"socialNetwork"},{type:"number",numberType:"integer",name:"uniqueSocialInteractions"},{type:"string",name:"hasSocialSourceReferral"},{type:"string",name:"socialInteractionNetworkAction"}],join:"one",name:"social"},{type:"record",fields:[{type:"number",numberType:"integer",name:"pageLoadSample"},{type:"number",numberType:"integer",name:"pageLoadTime"},{type:"number",numberType:"integer",name:"pageDownloadTime"},{type:"number",numberType:"integer",name:"redirectionTime"},{type:"number",numberType:"integer",name:"speedMetricsSample"},{type:"number",numberType:"integer",name:"domainLookupTime"},{type:"number",numberType:"integer",name:"serverConnectionTime"},{type:"number",numberType:"integer",name:"serverResponseTime"},{type:"number",numberType:"integer",name:"domLatencyMetricsSample"},{type:"number",numberType:"integer",name:"domInteractiveTime"},{type:"number",numberType:"integer",name:"domContentLoadedTime"},{type:"number",numberType:"integer",name:"userTimingValue"},{type:"number",numberType:"integer",name:"userTimingSample"},{type:"string",name:"userTimingVariable"},{type:"string",name:"userTimingCategory"},{type:"string",name:"userTimingLabel"}],join:"one",name:"latencyTracking"},{type:"record",fields:[{type:"string",name:"sourcePropertyDisplayName"},{type:"string",name:"sourcePropertyTrackingId"}],join:"one",name:"sourcePropertyInfo"},{type:"record",fields:[{type:"string",name:"contentGroup1"},{type:"string",name:"contentGroup2"},{type:"string",name:"contentGroup3"},{type:"string",name:"contentGroup4"},{type:"string",name:"contentGroup5"},{type:"string",name:"previousContentGroup1"},{type:"string",name:"previousContentGroup2"},{type:"string",name:"previousContentGroup3"},{type:"string",name:"previousContentGroup4"},{type:"string",name:"previousContentGroup5"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews1"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews2"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews3"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews4"},{type:"number",numberType:"integer",name:"contentGroupUniqueViews5"}],join:"one",name:"contentGroup"},{type:"string",name:"dataSource"},{type:"array",fields:[{type:"number",numberType:"integer",name:"dfpClicks"},{type:"number",numberType:"integer",name:"dfpImpressions"},{type:"number",numberType:"integer",name:"dfpMatchedQueries"},{type:"number",numberType:"integer",name:"dfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"dfpQueries"},{type:"number",numberType:"integer",name:"dfpRevenueCpm"},{type:"number",numberType:"integer",name:"dfpRevenueCpc"},{type:"number",numberType:"integer",name:"dfpViewableImpressions"},{type:"number",numberType:"integer",name:"dfpPagesViewed"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adsenseBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxBackfillDfpClicks"},{type:"number",numberType:"integer",name:"adxBackfillDfpImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpMatchedQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpQueries"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpm"},{type:"number",numberType:"integer",name:"adxBackfillDfpRevenueCpc"},{type:"number",numberType:"integer",name:"adxBackfillDfpViewableImpressions"},{type:"number",numberType:"integer",name:"adxBackfillDfpPagesViewed"},{type:"number",numberType:"integer",name:"adxClicks"},{type:"number",numberType:"integer",name:"adxImpressions"},{type:"number",numberType:"integer",name:"adxMatchedQueries"},{type:"number",numberType:"integer",name:"adxMeasurableImpressions"},{type:"number",numberType:"integer",name:"adxQueries"},{type:"number",numberType:"integer",name:"adxRevenue"},{type:"number",numberType:"integer",name:"adxViewableImpressions"},{type:"number",numberType:"integer",name:"adxPagesViewed"},{type:"number",numberType:"integer",name:"adsViewed"},{type:"number",numberType:"integer",name:"adsUnitsViewed"},{type:"number",numberType:"integer",name:"adsUnitsMatched"},{type:"number",numberType:"integer",name:"viewableAdsViewed"},{type:"number",numberType:"integer",name:"measurableAdsViewed"},{type:"number",numberType:"integer",name:"adsPagesViewed"},{type:"number",numberType:"integer",name:"adsClicked"},{type:"number",numberType:"integer",name:"adsRevenue"},{type:"string",name:"dfpAdGroup"},{type:"string",name:"dfpAdUnits"},{type:"string",name:"dfpNetworkId"}],elementTypeDef:{type:"record_element"},join:"many",name:"publisher_infos"}],elementTypeDef:{type:"record_element"},join:"many",name:"hits",fieldUsage:[{path:["hits"]}]}],parameters:{},as:"ga_sessions"}},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},text:"device"},{type:"fieldReference",definition:{type:"string",name:"browser"},text:"browser"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},text:"user_count"},{type:"fieldReference",definition:{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"],sql:'(CASE WHEN group_set=1 THEN\n  count(distinct base."fullVisitorId")\n  END)'},right:{node:"all",e:{node:"field",path:["user_count"]},sql:'MAX((CASE WHEN group_set=0 THEN\n  count(distinct base."fullVisitorId")\n  END)) OVER ()'}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},text:"percent_of_users"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},text:"total_visits"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"total_hits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","hits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.hits.sum()"},text:"total_hits"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"total_page_views",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","pageviews"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.pageviews.sum()"},text:"total_page_views"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"sold_count",e:{node:"filteredExpr",kids:{e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"],sql:"CASE WHEN group_set=1 THEN\n  COUNT(DISTINCT base.\"__distinct_key\" || 'x' || hits_0_outer.__row_id)\n  END"},filterList:[{node:"filterCondition",code:"hits.product.productQuantity > 0",e:{node:">",kids:{left:{node:"field",path:["hits","product","productQuantity"],sql:'product_0."productQuantity"'},right:{node:"numberLiteral",literal:"0",sql:"0"}}},expressionType:"scalar",fieldUsage:[{path:["hits","product","productQuantity"]}],sql:'(product_0."productQuantity">0)'}]}},fieldUsage:[{path:["hits","product","productQuantity"]}],expressionType:"aggregate",code:"hits.count() { where: hits.product.productQuantity > 0 }"},text:"sold_count"},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},text:"trafficSource"},{type:"fieldReference",definition:{type:"string",name:"source"},text:"source"},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},text:"trafficSource"},{type:"fieldReference",definition:{type:"string",name:"source"},text:"source"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"user_count",e:{node:"aggregate",function:"distinct",e:{node:"field",path:["fullVisitorId"]}},fieldUsage:[{path:["fullVisitorId"]}],expressionType:"aggregate",code:"count(fullVisitorId)"},text:"user_count"},{type:"fieldReference",definition:{type:"number",name:"percent_of_users",e:{node:"/",kids:{left:{node:"field",path:["user_count"],sql:'(CASE WHEN group_set=1 THEN\n  count(distinct base."fullVisitorId")\n  END)'},right:{node:"all",e:{node:"field",path:["user_count"]},sql:'MAX((CASE WHEN group_set=0 THEN\n  count(distinct base."fullVisitorId")\n  END)) OVER ()'}}},fieldUsage:[{path:["user_count"]},{path:["user_count"]}],ungroupings:[{requiresGroupBy:[],fieldUsage:[{path:["user_count"]}],ungroupedFields:"*"}],expressionType:"ungrouped_aggregate",code:"user_count / all(user_count)",annotation:{notes:[{text:"# percent\n"}]}},text:"percent_of_users"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"hits_count",e:{node:"aggregate",function:"count",e:{node:""},structPath:["hits"]},fieldUsage:[],expressionType:"aggregate",code:"hits.count()"},text:"hits_count"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"total_visits",e:{node:"aggregate",function:"sum",e:{node:"field",path:["totals","visits"]},structPath:["totals"]},fieldUsage:[],expressionType:"aggregate",code:"totals.visits.sum()"},text:"total_visits"},{type:"fieldReference",definition:{type:"number",numberType:"integer",name:"session_count",e:{node:"aggregate",function:"count",e:{node:""}},fieldUsage:[],expressionType:"aggregate",code:"count()"},text:"session_count"},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"referralPath"},{type:"string",name:"campaign"},{type:"string",name:"source"},{type:"string",name:"medium"},{type:"string",name:"keyword"},{type:"string",name:"adContent"},{type:"record",fields:[{type:"number",numberType:"integer",name:"campaignId"},{type:"number",numberType:"integer",name:"adGroupId"},{type:"number",numberType:"integer",name:"creativeId"},{type:"number",numberType:"integer",name:"criteriaId"},{type:"number",numberType:"integer",name:"page"},{type:"string",name:"slot"},{type:"string",name:"criteriaParameters"},{type:"string",name:"gclId"},{type:"number",numberType:"integer",name:"customerId"},{type:"string",name:"adNetworkType"},{type:"record",fields:[{type:"number",numberType:"integer",name:"boomUserlistId"}],join:"one",name:"targetingCriteria"},{type:"boolean",name:"isVideoAd"}],join:"one",name:"adwordsClickInfo"},{type:"boolean",name:"isTrueDirect"},{type:"string",name:"campaignCode"}],join:"one",name:"trafficSource",fieldUsage:[{path:["trafficSource"]}]},text:"trafficSource"},{type:"joinReference",definition:{type:"record",fields:[{type:"string",name:"browser"},{type:"string",name:"browserVersion"},{type:"string",name:"browserSize"},{type:"string",name:"operatingSystem"},{type:"string",name:"operatingSystemVersion"},{type:"boolean",name:"isMobile"},{type:"string",name:"mobileDeviceBranding"},{type:"string",name:"mobileDeviceModel"},{type:"string",name:"mobileInputSelector"},{type:"string",name:"mobileDeviceInfo"},{type:"string",name:"mobileDeviceMarketingName"},{type:"string",name:"flashVersion"},{type:"boolean",name:"javaEnabled"},{type:"string",name:"language"},{type:"string",name:"screenColors"},{type:"string",name:"screenResolution"},{type:"string",name:"deviceCategory"}],join:"one",name:"device",fieldUsage:[{path:["device"]}]},text:"device"}],imports:[]},n.queryResult={lastStageName:"__stage1",malloy:"",sql:'WITH __stage0 AS (\n  SELECT\n    group_set,\n    CASE WHEN group_set IN (1,2) THEN\n      base."device"."browser"\n      END as "browser__1",\n    CASE WHEN group_set=1 THEN\n      count(distinct base."fullVisitorId")\n      END as "user_count__1",\n    (CASE WHEN group_set=1 THEN\n      count(distinct base."fullVisitorId")\n      END)*1.0/MAX((CASE WHEN group_set=0 THEN\n      count(distinct base."fullVisitorId")\n      END)) OVER () as "percent_of_users__1",\n    CASE WHEN group_set=1 THEN\n      COALESCE((\n          SELECT SUM(a.val) as value\n          FROM (\n            SELECT UNNEST(list(distinct {key:base."__distinct_key", val: base."totals"."visits"})) a\n          )\n        ),0)\n      END as "total_visits__1",\n    CASE WHEN group_set=1 THEN\n      COALESCE((\n          SELECT SUM(a.val) as value\n          FROM (\n            SELECT UNNEST(list(distinct {key:base."__distinct_key", val: base."totals"."hits"})) a\n          )\n        ),0)\n      END as "total_hits__1",\n    CASE WHEN group_set=1 THEN\n      COALESCE((\n          SELECT SUM(a.val) as value\n          FROM (\n            SELECT UNNEST(list(distinct {key:base."__distinct_key", val: base."totals"."pageviews"})) a\n          )\n        ),0)\n      END as "total_page_views__1",\n    CASE WHEN group_set=1 THEN\n      COUNT(DISTINCT CASE WHEN product_0."productQuantity">0 THEN base."__distinct_key" || \'x\' || hits_0_outer.__row_id END)\n      END as "sold_count__1",\n    CASE WHEN group_set=2 THEN\n      base."trafficSource"."source"\n      END as "source__2",\n    CASE WHEN group_set=2 THEN\n      count(distinct base."fullVisitorId")\n      END as "user_count__2",\n    (CASE WHEN group_set=2 THEN\n      count(distinct base."fullVisitorId")\n      END)*1.0/MAX((CASE WHEN group_set=1 THEN\n      count(distinct base."fullVisitorId")\n      END)) OVER (PARTITION BY CASE WHEN group_set IN (1,2) THEN\n      base."device"."browser"\n      END) as "percent_of_users__2",\n    CASE WHEN group_set=2 THEN\n      COUNT(DISTINCT base."__distinct_key" || \'x\' || hits_0_outer.__row_id)\n      END as "hits_count__2",\n    CASE WHEN group_set=2 THEN\n      COALESCE((\n          SELECT SUM(a.val) as value\n          FROM (\n            SELECT UNNEST(list(distinct {key:base."__distinct_key", val: base."totals"."visits"})) a\n          )\n        ),0)\n      END as "total_visits__2",\n    CASE WHEN group_set=2 THEN\n      COUNT(DISTINCT base."__distinct_key")\n      END as "session_count__2"\n  FROM (SELECT GEN_RANDOM_UUID() as "__distinct_key", x.*  FROM \'../data/ga_sample.parquet\' as x) as base\n  LEFT JOIN LATERAL (SELECT UNNEST(GENERATE_SERIES(1, length(base."hits"),1)) as __row_id, UNNEST(base."hits"), 1 as ignoreme) as hits_0_outer(__row_id, hits_0,ignoreme) ON  hits_0_outer.ignoreme=1\n  LEFT JOIN LATERAL (SELECT UNNEST(hits_0."product"), 1 as ignoreme) as product_0_outer(product_0,ignoreme) ON product_0_outer.ignoreme=1\n  CROSS JOIN (SELECT UNNEST(GENERATE_SERIES(0,2,1)) as group_set  ) as group_set\n  WHERE (group_set NOT IN (2) OR (group_set IN (2) AND COALESCE(base."trafficSource"."source"!=\'(direct)\',true)))\n  GROUP BY 1,2,9\n)\nSELECT\n  "browser__1" as "browser",\n  MAX(CASE WHEN group_set=1 THEN "user_count__1" END) as "user_count",\n  MAX(CASE WHEN group_set=1 THEN "percent_of_users__1" END) as "percent_of_users",\n  MAX(CASE WHEN group_set=1 THEN "total_visits__1" END) as "total_visits",\n  MAX(CASE WHEN group_set=1 THEN "total_hits__1" END) as "total_hits",\n  MAX(CASE WHEN group_set=1 THEN "total_page_views__1" END) as "total_page_views",\n  MAX(CASE WHEN group_set=1 THEN "sold_count__1" END) as "sold_count",\n  COALESCE(LIST({\n    "source": "source__2", \n    "user_count": "user_count__2", \n    "percent_of_users": "percent_of_users__2", \n    "hits_count": "hits_count__2", \n    "total_visits": "total_visits__2", \n    "session_count": "session_count__2"}  ORDER BY  "user_count__2" desc NULLS LAST) FILTER (WHERE group_set=2)[1:10],[]) as "by_source"\nFROM __stage0\nWHERE group_set NOT IN (0)\nGROUP BY 1\nORDER BY 2 desc NULLS LAST\n',dependenciesToMaterialize:{},structs:[{type:"query_result",name:"__stage1",fields:[{name:"browser",type:"string",resultMetadata:{sourceField:"device.browser",sourceClasses:["device.browser"],referenceId:"7a76b68d-891e-49a5-aaba-0bc58c9d3bc0",fieldKind:"dimension"}},{name:"user_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"user_count",sourceExpression:"count(fullVisitorId)",sourceClasses:["user_count"],referenceId:"d0de5d88-1180-47c7-87ea-0793aca4b6fa",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:2,character:4},end:{line:2,character:38}}}},{name:"percent_of_users",type:"number",resultMetadata:{sourceField:"percent_of_users",sourceExpression:"user_count / all(user_count)",sourceClasses:["percent_of_users"],referenceId:"bf5b0431-9773-47e5-827a-d6878c232c7a",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:3,character:4},end:{line:4,character:52}}},annotation:{inherits:{notes:[{text:"# percent\n",at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:3,character:4},end:{line:3,character:14}}}}]}}},{name:"total_visits",numberType:"integer",type:"number",resultMetadata:{sourceField:"total_visits",sourceExpression:"totals.visits.sum()",sourceClasses:["total_visits"],referenceId:"81e8cf0d-e6b5-4a33-bbea-2ad83238c292",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:6,character:4},end:{line:6,character:39}}}},{name:"total_hits",numberType:"integer",type:"number",resultMetadata:{sourceField:"total_hits",sourceExpression:"totals.hits.sum()",sourceClasses:["total_hits"],referenceId:"3f0c58ee-cae3-4fa7-979a-b78fb63732a5",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:7,character:4},end:{line:7,character:35}}}},{name:"total_page_views",numberType:"integer",type:"number",resultMetadata:{sourceField:"total_page_views",sourceExpression:"totals.pageviews.sum()",sourceClasses:["total_page_views"],referenceId:"64f45c1a-c156-4520-bc0e-0e06149dd37d",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:8,character:4},end:{line:8,character:46}}}},{name:"sold_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"sold_count",sourceExpression:"hits.count() { where: hits.product.productQuantity > 0 }",sourceClasses:["sold_count"],referenceId:"dc8b62f3-fd7f-4189-bb85-501b1e6ba68e",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:12,character:4},end:{line:12,character:74}}}},{type:"array",name:"by_source",fields:[{name:"source",type:"string",resultMetadata:{sourceField:"trafficSource.source",sourceClasses:["trafficSource.source"],referenceId:"5ecc22a7-bf14-4546-8c67-44afbf1afc81",fieldKind:"dimension"},drillView:"by_source"},{name:"user_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"user_count",sourceExpression:"count(fullVisitorId)",sourceClasses:["user_count"],referenceId:"d0de5d88-1180-47c7-87ea-0793aca4b6fa",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:2,character:4},end:{line:2,character:38}}},drillView:"by_source"},{name:"percent_of_users",type:"number",resultMetadata:{sourceField:"percent_of_users",sourceExpression:"user_count / all(user_count)",sourceClasses:["percent_of_users"],referenceId:"bf5b0431-9773-47e5-827a-d6878c232c7a",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:3,character:4},end:{line:4,character:52}}},annotation:{inherits:{notes:[{text:"# percent\n",at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:3,character:4},end:{line:3,character:14}}}}]}},drillView:"by_source"},{name:"hits_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"hits_count",sourceExpression:"hits.count()",sourceClasses:["hits_count"],referenceId:"c61af7f9-5509-4f30-9c48-d6fc2c0d7aab",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:11,character:4},end:{line:11,character:30}}},drillView:"by_source"},{name:"total_visits",numberType:"integer",type:"number",resultMetadata:{sourceField:"total_visits",sourceExpression:"totals.visits.sum()",sourceClasses:["total_visits"],referenceId:"81e8cf0d-e6b5-4a33-bbea-2ad83238c292",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:6,character:4},end:{line:6,character:39}}},drillView:"by_source"},{name:"session_count",numberType:"integer",type:"number",resultMetadata:{sourceField:"session_count",sourceExpression:"count()",sourceClasses:["session_count"],referenceId:"ae5ee5ae-6d8b-48d2-98d3-52d340a2ff73",filterList:[],fieldKind:"measure"},location:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:5,character:4},end:{line:5,character:28}}},drillView:"by_source"}],dialect:"duckdb",connection:"duckdb",resultMetadata:{sourceField:"by_source",filterList:[{node:"filterCondition",code:"trafficSource.`source` != '(direct)'",e:{node:"!=",kids:{left:{node:"field",path:["trafficSource","source"],at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:11,character:11},end:{line:11,character:33}}},sql:'base."trafficSource"."source"'},right:{node:"stringLiteral",literal:"(direct)",sql:"'(direct)'"}}},expressionType:"scalar",fieldUsage:[{path:["trafficSource","source"],at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:11,character:11},end:{line:11,character:33}}}}],drillView:"by_source"}],sourceClasses:["by_source"],fieldKind:"struct",limit:10,orderBy:[{field:"user_count",dir:"desc"}],drillable:!0},annotation:{},elementTypeDef:{type:"record_element"},join:"many"}],dialect:"duckdb",primaryKey:"browser",connection:"duckdb",resultMetadata:{sourceField:"ignoreme",filterList:[],sourceClasses:["ignoreme"],fieldKind:"struct",orderBy:[{field:"user_count",dir:"desc"}],drillable:!0}}],sourceExplore:"ga_sessions",sourceArguments:{},connectionName:"duckdb",annotation:{notes:[],blockNotes:[{text:"#(docs) size=large limit=5000\n",at:{url:"file:///home/runner/work/malloydata.github.io/malloydata.github.io/src/documentation/patterns/reading_nested.malloynb",range:{start:{line:0,character:0},end:{line:0,character:30}}}}]},result:[{browser:"Chrome",user_count:1689,percent_of_users:.7365896205843873,total_visits:1900,total_hits:10896,total_page_views:8956,sold_count:642,by_source:[{source:"youtube.com",user_count:104,percent_of_users:.0615748963883955,hits_count:209,total_visits:105,session_count:105},{source:"analytics.google.com",user_count:46,percent_of_users:.027235050325636473,hits_count:96,total_visits:50,session_count:50},{source:"Partners",user_count:36,percent_of_users:.021314387211367674,hits_count:102,total_visits:39,session_count:39},{source:"google.com",user_count:9,percent_of_users:.0053285968028419185,hits_count:15,total_visits:10,session_count:10},{source:"sites.google.com",user_count:8,percent_of_users:.004736530491415038,hits_count:34,total_visits:8,session_count:8},{source:"dfa",user_count:5,percent_of_users:.002960331557134399,hits_count:55,total_visits:10,session_count:10},{source:"quora.com",user_count:5,percent_of_users:.002960331557134399,hits_count:12,total_visits:6,session_count:6},{source:"baidu",user_count:4,percent_of_users:.002368265245707519,hits_count:8,total_visits:4,session_count:4},{source:"groups.google.com",user_count:4,percent_of_users:.002368265245707519,hits_count:9,total_visits:4,session_count:4},{source:"facebook.com",user_count:4,percent_of_users:.002368265245707519,hits_count:15,total_visits:4,session_count:4}]},{browser:"Safari",user_count:364,percent_of_users:.1587440034888792,total_visits:397,total_hits:1260,total_page_views:1137,sold_count:24,by_source:[{source:"youtube.com",user_count:26,percent_of_users:.07142857142857142,hits_count:33,total_visits:26,session_count:26},{source:"dfa",user_count:2,percent_of_users:.005494505494505495,hits_count:3,total_visits:3,session_count:3},{source:"lm.facebook.com",user_count:1,percent_of_users:.0027472527472527475,hits_count:2,total_visits:1,session_count:1},{source:"baidu",user_count:1,percent_of_users:.0027472527472527475,hits_count:2,total_visits:1,session_count:1},{source:"support.google.com",user_count:1,percent_of_users:.0027472527472527475,hits_count:1,total_visits:1,session_count:1},{source:"m.facebook.com",user_count:1,percent_of_users:.0027472527472527475,hits_count:1,total_visits:1,session_count:1},{source:"yahoo",user_count:1,percent_of_users:.0027472527472527475,hits_count:2,total_visits:1,session_count:1},{source:"facebook.com",user_count:1,percent_of_users:.0027472527472527475,hits_count:14,total_visits:1,session_count:1},{source:"Partners",user_count:1,percent_of_users:.0027472527472527475,hits_count:1,total_visits:1,session_count:1},{source:"qiita.com",user_count:1,percent_of_users:.0027472527472527475,hits_count:1,total_visits:1,session_count:1}]},{browser:"Firefox",user_count:95,percent_of_users:.04143044047099869,total_visits:101,total_hits:390,total_page_views:343,sold_count:10,by_source:[{source:"youtube.com",user_count:15,percent_of_users:.15789473684210525,hits_count:19,total_visits:15,session_count:15},{source:"analytics.google.com",user_count:6,percent_of_users:.06315789473684211,hits_count:15,total_visits:6,session_count:6},{source:"Partners",user_count:3,percent_of_users:.031578947368421054,hits_count:6,total_visits:3,session_count:3},{source:"reddit.com",user_count:2,percent_of_users:.021052631578947368,hits_count:6,total_visits:2,session_count:2},{source:"blog.golang.org",user_count:2,percent_of_users:.021052631578947368,hits_count:3,total_visits:2,session_count:2},{source:"int.search.tb.ask.com",user_count:1,percent_of_users:.010526315789473684,hits_count:3,total_visits:1,session_count:1},{source:"dfa",user_count:1,percent_of_users:.010526315789473684,hits_count:6,total_visits:2,session_count:2},{source:"qiita.com",user_count:1,percent_of_users:.010526315789473684,hits_count:15,total_visits:1,session_count:1},{source:"l.facebook.com",user_count:1,percent_of_users:.010526315789473684,hits_count:1,total_visits:1,session_count:1}]},{browser:"Internet Explorer",user_count:50,percent_of_users:.021805494984736152,total_visits:54,total_hits:107,total_page_views:102,sold_count:1,by_source:[{source:"youtube.com",user_count:13,percent_of_users:.26,hits_count:15,total_visits:13,session_count:13},{source:"Partners",user_count:3,percent_of_users:.06,hits_count:3,total_visits:3,session_count:3},{source:"qiita.com",user_count:1,percent_of_users:.02,hits_count:2,total_visits:1,session_count:1},{source:"yahoo",user_count:1,percent_of_users:.02,hits_count:3,total_visits:1,session_count:1},{source:"facebook.com",user_count:1,percent_of_users:.02,hits_count:6,total_visits:1,session_count:1}]},{browser:"Edge",user_count:23,percent_of_users:.01003052769297863,total_visits:23,total_hits:63,total_page_views:55,sold_count:0,by_source:[{source:"youtube.com",user_count:10,percent_of_users:.43478260869565216,hits_count:39,total_visits:10,session_count:10},{source:"Partners",user_count:2,percent_of_users:.08695652173913043,hits_count:3,total_visits:2,session_count:2},{source:"bing",user_count:1,percent_of_users:.043478260869565216,hits_count:4,total_visits:1,session_count:1},{source:"l.facebook.com",user_count:1,percent_of_users:.043478260869565216,hits_count:1,total_visits:1,session_count:1}]},{browser:"Opera Mini",user_count:21,percent_of_users:.009158307893589184,total_visits:21,total_hits:29,total_page_views:28,sold_count:0,by_source:[{source:"youtube.com",user_count:3,percent_of_users:.14285714285714285,hits_count:3,total_visits:3,session_count:3}]},{browser:"Android Webview",user_count:17,percent_of_users:.007413868294810292,total_visits:19,total_hits:363,total_page_views:211,sold_count:1,by_source:[{source:"Partners",user_count:4,percent_of_users:.23529411764705882,hits_count:34,total_visits:4,session_count:4},{source:"youtube.com",user_count:3,percent_of_users:.17647058823529413,hits_count:4,total_visits:4,session_count:4},{source:"m.facebook.com",user_count:1,percent_of_users:.058823529411764705,hits_count:3,total_visits:1,session_count:1}]},{browser:"Opera",user_count:11,percent_of_users:.004797208896641954,total_visits:16,total_hits:55,total_page_views:49,sold_count:1,by_source:[{source:"facebook.com",user_count:1,percent_of_users:.09090909090909091,hits_count:1,total_visits:1,session_count:1},{source:"google.com",user_count:1,percent_of_users:.09090909090909091,hits_count:19,total_visits:1,session_count:1}]},{browser:"Safari (in-app)",user_count:8,percent_of_users:.0034888791975577847,total_visits:10,total_hits:33,total_page_views:29,sold_count:1,by_source:[{source:"lm.facebook.com",user_count:1,percent_of_users:.125,hits_count:2,total_visits:1,session_count:1},{source:"m.facebook.com",user_count:1,percent_of_users:.125,hits_count:4,total_visits:3,session_count:3},{source:"pinterest.com",user_count:1,percent_of_users:.125,hits_count:11,total_visits:1,session_count:1}]},{browser:"UC Browser",user_count:6,percent_of_users:.0026166593981683385,total_visits:6,total_hits:22,total_page_views:14,sold_count:0,by_source:[{source:"youtube.com",user_count:1,percent_of_users:.16666666666666666,hits_count:1,total_visits:1,session_count:1}]},{browser:"Nokia Browser",user_count:2,percent_of_users:.0008722197993894462,total_visits:2,total_hits:3,total_page_views:3,sold_count:0,by_source:[{source:"google.com",user_count:1,percent_of_users:.5,hits_count:1,total_visits:1,session_count:1}]},{browser:"YaBrowser",user_count:2,percent_of_users:.0008722197993894462,total_visits:2,total_hits:6,total_page_views:6,sold_count:0,by_source:[{source:"analytics.google.com",user_count:1,percent_of_users:.5,hits_count:3,total_visits:1,session_count:1},{source:"youtube.com",user_count:1,percent_of_users:.5,hits_count:3,total_visits:1,session_count:1}]},{browser:"Coc Coc",user_count:2,percent_of_users:.0008722197993894462,total_visits:2,total_hits:2,total_page_views:2,sold_count:0,by_source:[{source:"youtube.com",user_count:1,percent_of_users:.5,hits_count:1,total_visits:1,session_count:1}]},{browser:"Android Browser",user_count:2,percent_of_users:.0008722197993894462,total_visits:2,total_hits:3,total_page_views:3,sold_count:0,by_source:[{source:"m.baidu.com",user_count:1,percent_of_users:.5,hits_count:1,total_visits:1,session_count:1}]},{browser:"Mozilla Compatible Agent",user_count:1,percent_of_users:.0004361098996947231,total_visits:1,total_hits:1,total_page_views:1,sold_count:0,by_source:[{source:"youtube.com",user_count:1,percent_of_users:1,hits_count:1,total_visits:1,session_count:1}]}],totalRows:15},e.appendChild(n)})();</script>
      </div>
    </div>
    <div class="result-middle" data-result-kind="json" >
      <div class="result-inner">
        <pre><pre class="language-json" style="background-color: #FBFBFB"><span class="line"><span style="color: #000000">[</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Chrome&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1689</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.7365896205843873</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1900</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10896</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8956</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">642</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">104</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0615748963883955</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">209</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">105</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">105</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;analytics.google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">46</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.027235050325636473</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">96</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">50</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">50</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Partners&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">36</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.021314387211367674</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">102</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">39</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">39</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">9</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0053285968028419185</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;sites.google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.004736530491415038</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">34</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;dfa&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.002960331557134399</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">55</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;quora.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.002960331557134399</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">12</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;baidu&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.002368265245707519</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;groups.google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.002368265245707519</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">9</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.002368265245707519</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Safari&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">364</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.1587440034888792</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">397</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1260</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1137</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">24</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">26</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.07142857142857142</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">33</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">26</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">26</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;dfa&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.005494505494505495</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;lm.facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0027472527472527475</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;baidu&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0027472527472527475</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;support.google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0027472527472527475</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;m.facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0027472527472527475</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;yahoo&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0027472527472527475</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0027472527472527475</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">14</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Partners&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0027472527472527475</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;qiita.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0027472527472527475</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Firefox&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">95</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.04143044047099869</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">101</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">390</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">343</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.15789473684210525</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">19</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;analytics.google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.06315789473684211</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Partners&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.031578947368421054</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;reddit.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.021052631578947368</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;blog.golang.org&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.021052631578947368</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;int.search.tb.ask.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.010526315789473684</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;dfa&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.010526315789473684</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;qiita.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.010526315789473684</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;l.facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.010526315789473684</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Internet Explorer&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">50</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.021805494984736152</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">54</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">107</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">102</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">13</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.26</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">15</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">13</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">13</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Partners&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.06</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;qiita.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.02</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;yahoo&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.02</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.02</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Edge&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">23</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.01003052769297863</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">23</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">63</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">55</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.43478260869565216</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">39</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Partners&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.08695652173913043</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;bing&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.043478260869565216</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;l.facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.043478260869565216</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Opera Mini&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">21</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.009158307893589184</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">21</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">29</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">28</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.14285714285714285</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Android Webview&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">17</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.007413868294810292</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">19</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">363</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">211</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Partners&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.23529411764705882</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">34</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.17647058823529413</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;m.facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.058823529411764705</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Opera&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">11</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.004797208896641954</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">16</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">55</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">49</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.09090909090909091</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.09090909090909091</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">19</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Safari (in-app)&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">8</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0034888791975577847</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">10</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">33</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">29</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;lm.facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.125</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;m.facebook.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.125</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">4</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;pinterest.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.125</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">11</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;UC Browser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0026166593981683385</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">22</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">14</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.16666666666666666</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Nokia Browser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0008722197993894462</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;YaBrowser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0008722197993894462</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">6</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;analytics.google.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      },</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Coc Coc&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0008722197993894462</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Android Browser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0008722197993894462</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">3</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;m.baidu.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.5</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;browser&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Mozilla Compatible Agent&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0.0004361098996947231</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_hits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;total_page_views&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;sold_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">0</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;by_source&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;youtube.com&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">]</span></span></pre></pre>
      </div>
    </div>
    <div class="result-middle" data-result-kind="sql" >
      <div class="result-inner">
        <pre><pre class="language-sql" style="background-color: #FBFBFB"><span class="line"><span style="color: #0000FF">WITH</span><span style="color: #000000"> __stage0 </span><span style="color: #0000FF">AS</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">SELECT</span></span>
<span class="line"><span style="color: #000000">    group_set,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set </span><span style="color: #0000FF">IN</span><span style="color: #000000"> (</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">) </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      base.</span><span style="color: #A31515">&quot;device&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;browser&quot;</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;browser__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    (</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">)*</span><span style="color: #098658">1</span><span style="color: #000000">.</span><span style="color: #098658">0</span><span style="color: #000000">/</span><span style="color: #795E26">MAX</span><span style="color: #000000">((</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">0</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">)) </span><span style="color: #0000FF">OVER</span><span style="color: #000000"> () </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">((</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> </span><span style="color: #795E26">SUM</span><span style="color: #000000">(a.val) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">value</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(list(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> {</span><span style="color: #0000FF">key</span><span style="color: #000000">:base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, val: base.</span><span style="color: #A31515">&quot;totals&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;visits&quot;</span><span style="color: #000000">})) a</span></span>
<span class="line"><span style="color: #000000">          )</span></span>
<span class="line"><span style="color: #000000">        ),</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">((</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> </span><span style="color: #795E26">SUM</span><span style="color: #000000">(a.val) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">value</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(list(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> {</span><span style="color: #0000FF">key</span><span style="color: #000000">:base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, val: base.</span><span style="color: #A31515">&quot;totals&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;hits&quot;</span><span style="color: #000000">})) a</span></span>
<span class="line"><span style="color: #000000">          )</span></span>
<span class="line"><span style="color: #000000">        ),</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_hits__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">((</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> </span><span style="color: #795E26">SUM</span><span style="color: #000000">(a.val) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">value</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(list(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> {</span><span style="color: #0000FF">key</span><span style="color: #000000">:base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, val: base.</span><span style="color: #A31515">&quot;totals&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;pageviews&quot;</span><span style="color: #000000">})) a</span></span>
<span class="line"><span style="color: #000000">          )</span></span>
<span class="line"><span style="color: #000000">        ),</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_page_views__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COUNT</span><span style="color: #000000">(</span><span style="color: #0000FF">DISTINCT</span><span style="color: #000000"> </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> product_0.</span><span style="color: #A31515">&quot;productQuantity&quot;</span><span style="color: #000000">&gt;</span><span style="color: #098658">0</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000"> || </span><span style="color: #A31515">&#39;x&#39;</span><span style="color: #000000"> || hits_0_outer.__row_id </span><span style="color: #0000FF">END</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;sold_count__1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      base.</span><span style="color: #A31515">&quot;trafficSource&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;source&quot;</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;source__2&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count__2&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    (</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">)*</span><span style="color: #098658">1</span><span style="color: #000000">.</span><span style="color: #098658">0</span><span style="color: #000000">/</span><span style="color: #795E26">MAX</span><span style="color: #000000">((</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">count</span><span style="color: #000000">(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;fullVisitorId&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">)) </span><span style="color: #0000FF">OVER</span><span style="color: #000000"> (</span><span style="color: #0000FF">PARTITION</span><span style="color: #000000"> </span><span style="color: #0000FF">BY</span><span style="color: #000000"> </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set </span><span style="color: #0000FF">IN</span><span style="color: #000000"> (</span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">) </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      base.</span><span style="color: #A31515">&quot;device&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;browser&quot;</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users__2&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COUNT</span><span style="color: #000000">(</span><span style="color: #0000FF">DISTINCT</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000"> || </span><span style="color: #A31515">&#39;x&#39;</span><span style="color: #000000"> || hits_0_outer.__row_id)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;hits_count__2&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">((</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> </span><span style="color: #795E26">SUM</span><span style="color: #000000">(a.val) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #0000FF">value</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(list(</span><span style="color: #0000FF">distinct</span><span style="color: #000000"> {</span><span style="color: #0000FF">key</span><span style="color: #000000">:base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, val: base.</span><span style="color: #A31515">&quot;totals&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;visits&quot;</span><span style="color: #000000">})) a</span></span>
<span class="line"><span style="color: #000000">          )</span></span>
<span class="line"><span style="color: #000000">        ),</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits__2&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">COUNT</span><span style="color: #000000">(</span><span style="color: #0000FF">DISTINCT</span><span style="color: #000000"> base.</span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">END</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;session_count__2&quot;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> GEN_RANDOM_UUID() </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;__distinct_key&quot;</span><span style="color: #000000">, x.*  </span><span style="color: #0000FF">FROM</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;../data/ga_sample.parquet&#39;</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> x) </span><span style="color: #0000FF">as</span><span style="color: #000000"> base</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">LEFT JOIN</span><span style="color: #000000"> LATERAL (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(GENERATE_SERIES(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #0000FF">length</span><span style="color: #000000">(base.</span><span style="color: #A31515">&quot;hits&quot;</span><span style="color: #000000">),</span><span style="color: #098658">1</span><span style="color: #000000">)) </span><span style="color: #0000FF">as</span><span style="color: #000000"> __row_id, UNNEST(base.</span><span style="color: #A31515">&quot;hits&quot;</span><span style="color: #000000">), </span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> ignoreme) </span><span style="color: #0000FF">as</span><span style="color: #000000"> hits_0_outer(__row_id, hits_0,ignoreme) </span><span style="color: #0000FF">ON</span><span style="color: #000000">  hits_0_outer.ignoreme=</span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">LEFT JOIN</span><span style="color: #000000"> LATERAL (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(hits_0.</span><span style="color: #A31515">&quot;product&quot;</span><span style="color: #000000">), </span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> ignoreme) </span><span style="color: #0000FF">as</span><span style="color: #000000"> product_0_outer(product_0,ignoreme) </span><span style="color: #0000FF">ON</span><span style="color: #000000"> product_0_outer.ignoreme=</span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">CROSS</span><span style="color: #000000"> </span><span style="color: #0000FF">JOIN</span><span style="color: #000000"> (</span><span style="color: #0000FF">SELECT</span><span style="color: #000000"> UNNEST(GENERATE_SERIES(</span><span style="color: #098658">0</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">1</span><span style="color: #000000">)) </span><span style="color: #0000FF">as</span><span style="color: #000000"> group_set  ) </span><span style="color: #0000FF">as</span><span style="color: #000000"> group_set</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">WHERE</span><span style="color: #000000"> (group_set </span><span style="color: #0000FF">NOT</span><span style="color: #000000"> </span><span style="color: #0000FF">IN</span><span style="color: #000000"> (</span><span style="color: #098658">2</span><span style="color: #000000">) </span><span style="color: #0000FF">OR</span><span style="color: #000000"> (group_set </span><span style="color: #0000FF">IN</span><span style="color: #000000"> (</span><span style="color: #098658">2</span><span style="color: #000000">) </span><span style="color: #0000FF">AND</span><span style="color: #000000"> </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">(base.</span><span style="color: #A31515">&quot;trafficSource&quot;</span><span style="color: #000000">.</span><span style="color: #A31515">&quot;source&quot;</span><span style="color: #000000">!=</span><span style="color: #A31515">&#39;(direct)&#39;</span><span style="color: #000000">,true)))</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">GROUP BY</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span><span style="color: #098658">2</span><span style="color: #000000">,</span><span style="color: #098658">9</span></span>
<span class="line"><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">SELECT</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&quot;browser__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;browser&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;user_count&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;percent_of_users&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_visits&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_hits__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_hits&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_page_views__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;total_page_views&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">MAX</span><span style="color: #000000">(</span><span style="color: #0000FF">CASE</span><span style="color: #000000"> </span><span style="color: #0000FF">WHEN</span><span style="color: #000000"> group_set=</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #0000FF">THEN</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;sold_count__1&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">END</span><span style="color: #000000">) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;sold_count&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #795E26">COALESCE</span><span style="color: #000000">(LIST({</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #A31515">&quot;source&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;source__2&quot;</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #A31515">&quot;user_count&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;user_count__2&quot;</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #A31515">&quot;percent_of_users&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;percent_of_users__2&quot;</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #A31515">&quot;hits_count&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;hits_count__2&quot;</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #A31515">&quot;total_visits&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;total_visits__2&quot;</span><span style="color: #000000">, </span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #A31515">&quot;session_count&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;session_count__2&quot;</span><span style="color: #000000">}  </span><span style="color: #0000FF">ORDER BY</span><span style="color: #000000">  </span><span style="color: #A31515">&quot;user_count__2&quot;</span><span style="color: #000000"> </span><span style="color: #0000FF">desc</span><span style="color: #000000"> NULLS </span><span style="color: #0000FF">LAST</span><span style="color: #000000">) </span><span style="color: #0000FF">FILTER</span><span style="color: #000000"> (</span><span style="color: #0000FF">WHERE</span><span style="color: #000000"> group_set=</span><span style="color: #098658">2</span><span style="color: #000000">)[1:10],[]) </span><span style="color: #0000FF">as</span><span style="color: #000000"> </span><span style="color: #A31515">&quot;by_source&quot;</span></span>
<span class="line"><span style="color: #0000FF">FROM</span><span style="color: #000000"> __stage0</span></span>
<span class="line"><span style="color: #0000FF">WHERE</span><span style="color: #000000"> group_set </span><span style="color: #0000FF">NOT</span><span style="color: #000000"> </span><span style="color: #0000FF">IN</span><span style="color: #000000"> (</span><span style="color: #098658">0</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #0000FF">GROUP BY</span><span style="color: #000000"> </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #0000FF">ORDER BY</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> </span><span style="color: #0000FF">desc</span><span style="color: #000000"> NULLS </span><span style="color: #0000FF">LAST</span></span>
<span class="line"></span></pre></pre>
      </div>
    </div>
  </div></div></div></div>
        </div>
        <script src="/js/view_toggles.js"></script>
        <script src="/js/jump_to_hash.js"></script>
      </div>
    </div>
    <div id="banner_wrapper">
      <div id="banner">
        <div>
          This site uses cookies from Google to deliver its services and to analyze
          traffic.
          <a
            href="https://policies.google.com/technologies/cookies"
            target="_blank"
          >
            Learn more
          </a>
        </div>
        <button id="banner_button">I Understand</button>
      </div>
    </div>
    <script src="/js/banner.js"></script>
    <script src="/js/generated/malloy-render-0.0.282.js"></script>
  </body>
</html>
